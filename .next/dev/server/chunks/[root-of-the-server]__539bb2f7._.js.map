{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/lib/user-store.ts"],"sourcesContent":["// Shared user store for authentication demo\r\nexport interface User {\r\n  email: string\r\n  password: string\r\n  role: \"customer\" | \"seller\"\r\n  fullName: string\r\n  storeName?: string\r\n  username?: string\r\n  mobileNumber?: string\r\n  promoCode?: string\r\n  verificationStatus?: \"pending\" | \"approved\" | \"rejected\"\r\n  isVerified: boolean\r\n  createdAt: string\r\n}\r\n\r\n// Mock database - this will persist across API calls in development\r\nexport const users = new Map<string, User>([\r\n  // Pre-configured demo accounts\r\n  [\"seller@example.com\", {\r\n    email: \"seller@example.com\",\r\n    password: \"password123\",\r\n    role: \"seller\",\r\n    fullName: \"John Seller\",\r\n    storeName: \"John's Store\",\r\n    username: \"johnseller\",\r\n    mobileNumber: \"1234567890\",\r\n    promoCode: \"1234\",\r\n    verificationStatus: \"approved\",\r\n    isVerified: true,\r\n    createdAt: new Date().toISOString()\r\n  }],\r\n  [\"customer@example.com\", {\r\n    email: \"customer@example.com\", \r\n    password: \"password123\",\r\n    role: \"customer\",\r\n    fullName: \"Jane Customer\",\r\n    isVerified: true,\r\n    createdAt: new Date().toISOString()\r\n  }]\r\n])\r\n\r\nexport function createUser(userData: Omit<User, 'createdAt' | 'isVerified'>): User {\r\n  const user: User = {\r\n    ...userData,\r\n    isVerified: userData.role === \"customer\", // Customers are auto-verified\r\n    createdAt: new Date().toISOString()\r\n  }\r\n  \r\n  users.set(userData.email, user)\r\n  return user\r\n}\r\n\r\nexport function getUserByEmail(email: string): User | undefined {\r\n  return users.get(email)\r\n}\r\n\r\nexport function verifyUser(email: string, password: string): User | null {\r\n  const user = users.get(email)\r\n  if (!user || user.password !== password) {\r\n    return null\r\n  }\r\n  return user\r\n}\r\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;;;;;;;AAgBrC,MAAM,QAAQ,IAAI,IAAkB;IACzC,+BAA+B;IAC/B;QAAC;QAAsB;YACrB,OAAO;YACP,UAAU;YACV,MAAM;YACN,UAAU;YACV,WAAW;YACX,UAAU;YACV,cAAc;YACd,WAAW;YACX,oBAAoB;YACpB,YAAY;YACZ,WAAW,IAAI,OAAO,WAAW;QACnC;KAAE;IACF;QAAC;QAAwB;YACvB,OAAO;YACP,UAAU;YACV,MAAM;YACN,UAAU;YACV,YAAY;YACZ,WAAW,IAAI,OAAO,WAAW;QACnC;KAAE;CACH;AAEM,SAAS,WAAW,QAAgD;IACzE,MAAM,OAAa;QACjB,GAAG,QAAQ;QACX,YAAY,SAAS,IAAI,KAAK;QAC9B,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,MAAM,GAAG,CAAC,SAAS,KAAK,EAAE;IAC1B,OAAO;AACT;AAEO,SAAS,eAAe,KAAa;IAC1C,OAAO,MAAM,GAAG,CAAC;AACnB;AAEO,SAAS,WAAW,KAAa,EAAE,QAAgB;IACxD,MAAM,OAAO,MAAM,GAAG,CAAC;IACvB,IAAI,CAAC,QAAQ,KAAK,QAAQ,KAAK,UAAU;QACvC,OAAO;IACT;IACA,OAAO;AACT"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/app/api/auth/register/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { createUser, getUserByEmail } from \"@/lib/user-store\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const formData = await request.formData()\n\n    const role = formData.get(\"role\") as string\n    const fullName = formData.get(\"fullName\") as string\n    const email = formData.get(\"email\") as string\n    const password = formData.get(\"password\") as string\n\n    // Validate basic fields\n    if (!fullName || !email || !password) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    // Validate password length\n    if (password.length < 8) {\n      return NextResponse.json({ error: \"Password must be at least 8 characters\" }, { status: 400 })\n    }\n\n    // Check if user already exists\n    const existingUser = getUserByEmail(email)\n    if (existingUser) {\n      return NextResponse.json({ error: \"User with this email already exists\" }, { status: 400 })\n    }\n\n    // Validate seller fields\n    let userData: any = {\n      email,\n      password,\n      role: role as \"customer\" | \"seller\",\n      fullName\n    }\n\n    if (role === \"seller\") {\n      const username = formData.get(\"username\") as string\n      const storeName = formData.get(\"storeName\") as string\n      const mobileNumber = formData.get(\"mobileNumber\") as string\n      const promoCode = formData.get(\"promoCode\") as string\n      const idFrontImage = formData.get(\"idFrontImage\") as File\n      const idBackImage = formData.get(\"idBackImage\") as File\n\n      if (!username || username.length < 3) {\n        return NextResponse.json({ error: \"Username must be at least 3 characters\" }, { status: 400 })\n      }\n\n      if (!storeName) {\n        return NextResponse.json({ error: \"Store name is required\" }, { status: 400 })\n      }\n\n      if (!mobileNumber) {\n        return NextResponse.json({ error: \"Mobile number is required\" }, { status: 400 })\n      }\n\n      if (!/^\\d{4}$/.test(promoCode)) {\n        return NextResponse.json({ error: \"Promo code must be exactly 4 digits\" }, { status: 400 })\n      }\n\n      if (!idFrontImage || !idBackImage) {\n        return NextResponse.json({ error: \"ID images are required\" }, { status: 400 })\n      }\n\n      // Validate image files\n      if (!idFrontImage.type.startsWith(\"image/\") || !idBackImage.type.startsWith(\"image/\")) {\n        return NextResponse.json({ error: \"Invalid image format\" }, { status: 400 })\n      }\n\n      // Add seller-specific data\n      userData = {\n        ...userData,\n        username,\n        storeName,\n        mobileNumber,\n        promoCode,\n        verificationStatus: \"pending\" // Sellers need verification\n      }\n\n      // TODO: Upload images to Vercel Blob or Supabase when integrations are set up\n      // TODO: Verify promo code against database\n    }\n\n    // Create user in shared store\n    const newUser = createUser(userData)\n\n    console.log(`[v0] User created: ${newUser.email}, role: ${newUser.role}`)\n\n    return NextResponse.json(\n      {\n        success: true,\n        role: newUser.role,\n        email: newUser.email,\n        message: `${newUser.role === \"seller\" ? \"Seller\" : \"Customer\"} registration successful. Please check your email to verify your account.`,\n      },\n      { status: 201 },\n    )\n  } catch (error) {\n    console.log(\"[v0] Register error:\", error)\n    return NextResponse.json({ error: \"Registration failed\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":"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"}}]
}