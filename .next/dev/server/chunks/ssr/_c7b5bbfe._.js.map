{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\n// Initial state\r\nconst initialState = {\r\n  user: null,\r\n  token: typeof window !== 'undefined' ? localStorage.getItem('token') : null,\r\n  isAuthenticated: false,\r\n  isLoading: true,\r\n  error: null\r\n};\r\n\r\n// Action types\r\nconst AUTH_ACTIONS = {\r\n  LOGIN_START: 'LOGIN_START',\r\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\r\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\r\n  LOGOUT: 'LOGOUT',\r\n  REGISTER_START: 'REGISTER_START',\r\n  REGISTER_SUCCESS: 'REGISTER_SUCCESS',\r\n  REGISTER_FAILURE: 'REGISTER_FAILURE',\r\n  LOAD_USER: 'LOAD_USER',\r\n  LOAD_USER_SUCCESS: 'LOAD_USER_SUCCESS',\r\n  LOAD_USER_FAILURE: 'LOAD_USER_FAILURE',\r\n  CLEAR_ERROR: 'CLEAR_ERROR'\r\n};\r\n\r\n// Reducer\r\nconst authReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case AUTH_ACTIONS.LOGIN_START:\r\n    case AUTH_ACTIONS.REGISTER_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\r\n    case AUTH_ACTIONS.REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        token: action.payload.token,\r\n        isAuthenticated: true,\r\n        isLoading: false,\r\n        error: null\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOGIN_FAILURE:\r\n    case AUTH_ACTIONS.REGISTER_FAILURE:\r\n    case AUTH_ACTIONS.LOAD_USER_FAILURE:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: action.payload\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOGOUT:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: null\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOAD_USER:\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOAD_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload,\r\n        isAuthenticated: true,\r\n        isLoading: false\r\n      };\r\n    \r\n    case AUTH_ACTIONS.CLEAR_ERROR:\r\n      return {\r\n        ...state,\r\n        error: null\r\n      };\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Create context\r\nconst AuthContext = createContext();\r\n\r\n// Provider component\r\nexport const AuthProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n  // API base URL\r\n  const apiBase = process.env.NEXT_PUBLIC_API_URL || process.env.REACT_APP_API_URL || 'http://localhost:8000';\r\n  const API_URL = apiBase.endsWith('/api') ? apiBase : `${apiBase}/api`;\r\n\r\n  // Load user from token\r\n  useEffect(() => {\r\n    const loadUser = async () => {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        dispatch({ type: AUTH_ACTIONS.LOAD_USER_FAILURE, payload: 'No token found' });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Check if token is expired\r\n        const decoded = jwtDecode(token);\r\n        if (decoded.exp * 1000 < Date.now()) {\r\n          localStorage.removeItem('token');\r\n          dispatch({ type: AUTH_ACTIONS.LOAD_USER_FAILURE, payload: 'Token expired' });\r\n          return;\r\n        }\r\n\r\n        // Get user data\r\n        const response = await fetch(`${API_URL}/auth/me`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to load user');\r\n        }\r\n\r\n        const data = await response.json();\r\n        \r\n        if (data.success) {\r\n          dispatch({ type: AUTH_ACTIONS.LOAD_USER_SUCCESS, payload: data.user });\r\n        } else {\r\n          throw new Error(data.error || 'Failed to load user');\r\n        }\r\n      } catch (error) {\r\n        localStorage.removeItem('token');\r\n        dispatch({ type: AUTH_ACTIONS.LOAD_USER_FAILURE, payload: error.message });\r\n      }\r\n    };\r\n\r\n    loadUser();\r\n  }, []);\r\n\r\n  // Login\r\n  const login = async (email, password) => {\r\n    dispatch({ type: AUTH_ACTIONS.LOGIN_START });\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/auth/login`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ email, password })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        localStorage.setItem('token', data.token);\r\n        dispatch({\r\n          type: AUTH_ACTIONS.LOGIN_SUCCESS,\r\n          payload: {\r\n            user: data.user,\r\n            token: data.token\r\n          }\r\n        });\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(data.error || 'Login failed');\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\r\n        payload: error.message\r\n      });\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  // Register\r\n  const register = async (userData) => {\r\n    dispatch({ type: AUTH_ACTIONS.REGISTER_START });\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/auth/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(userData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        localStorage.setItem('token', data.token);\r\n        dispatch({\r\n          type: AUTH_ACTIONS.REGISTER_SUCCESS,\r\n          payload: {\r\n            user: data.user,\r\n            token: data.token\r\n          }\r\n        });\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(data.error || 'Registration failed');\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: AUTH_ACTIONS.REGISTER_FAILURE,\r\n        payload: error.message\r\n      });\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  // Logout\r\n  const logout = () => {\r\n    localStorage.removeItem('token');\r\n    dispatch({ type: AUTH_ACTIONS.LOGOUT });\r\n  };\r\n\r\n  // Clear error\r\n  const clearError = () => {\r\n    dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\r\n  };\r\n\r\n  const value = {\r\n    ...state,\r\n    login,\r\n    register,\r\n    logout,\r\n    clearError\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n// Hook to use auth context\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst useWebSocket = () => {\r\n  const { token, user } = useAuth();\r\n  const [socket, setSocket] = useState(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [conversations, setConversations] = useState([]);\r\n  const [typingUsers, setTypingUsers] = useState(new Set());\r\n  const [onlineUsers, setOnlineUsers] = useState(new Set());\r\n  const reconnectTimeoutRef = useRef(null);\r\n  const reconnectAttemptsRef = useRef(0);\r\n  const maxReconnectAttempts = 5;\r\n  const reconnectDelay = 3000;\r\n\r\n  // WebSocket URL\r\n  const wsUrl = process.env.REACT_APP_WS_URL || 'ws://localhost:8080';\r\n\r\n  // Connect to WebSocket\r\n  const connect = useCallback(() => {\r\n    if (!token) return;\r\n\r\n    try {\r\n      const ws = new WebSocket(`${wsUrl}?token=${token}`);\r\n      \r\n      ws.onopen = () => {\r\n        console.log('WebSocket connected');\r\n        setIsConnected(true);\r\n        setSocket(ws);\r\n        reconnectAttemptsRef.current = 0;\r\n      };\r\n\r\n      ws.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        \r\n        switch (data.type) {\r\n          case 'connection_established':\r\n            console.log('Connection established with user:', data.user_id);\r\n            break;\r\n\r\n          case 'message':\r\n            setMessages(prev => [...prev, data]);\r\n            break;\r\n\r\n          case 'typing':\r\n            if (data.is_typing) {\r\n              setTypingUsers(prev => new Set(prev).add(data.user_id));\r\n            } else {\r\n              setTypingUsers(prev => {\r\n                const newSet = new Set(prev);\r\n                newSet.delete(data.user_id);\r\n                return newSet;\r\n              });\r\n            }\r\n            break;\r\n\r\n          case 'read_receipt':\r\n            setMessages(prev => prev.map(msg => \r\n              msg.id === data.message_id \r\n                ? { ...msg, is_read: true, read_at: data.read_at }\r\n                : msg\r\n            ));\r\n            break;\r\n\r\n          case 'user_status':\r\n            if (data.is_online) {\r\n              setOnlineUsers(prev => new Set(prev).add(data.user_id));\r\n            } else {\r\n              setOnlineUsers(prev => {\r\n                const newSet = new Set(prev);\r\n                newSet.delete(data.user_id);\r\n                return newSet;\r\n              });\r\n            }\r\n            break;\r\n\r\n          case 'error':\r\n            console.error('WebSocket error:', data.message);\r\n            break;\r\n\r\n          default:\r\n            console.log('Unknown message type:', data.type);\r\n        }\r\n      };\r\n\r\n      ws.onclose = () => {\r\n        console.log('WebSocket disconnected');\r\n        setIsConnected(false);\r\n        setSocket(null);\r\n\r\n        // Attempt to reconnect\r\n        if (reconnectAttemptsRef.current < maxReconnectAttempts) {\r\n          reconnectTimeoutRef.current = setTimeout(() => {\r\n            reconnectAttemptsRef.current++;\r\n            console.log(`Attempting to reconnect (${reconnectAttemptsRef.current}/${maxReconnectAttempts})`);\r\n            connect();\r\n          }, reconnectDelay);\r\n        }\r\n      };\r\n\r\n      ws.onerror = (error) => {\r\n        console.error('WebSocket error:', error);\r\n        setIsConnected(false);\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Failed to connect to WebSocket:', error);\r\n    }\r\n  }, [token, wsUrl]);\r\n\r\n  // Disconnect\r\n  const disconnect = useCallback(() => {\r\n    if (reconnectTimeoutRef.current) {\r\n      clearTimeout(reconnectTimeoutRef.current);\r\n    }\r\n    \r\n    if (socket) {\r\n      socket.close();\r\n    }\r\n    \r\n    setIsConnected(false);\r\n    setSocket(null);\r\n    reconnectAttemptsRef.current = 0;\r\n  }, [socket]);\r\n\r\n  // Send message\r\n  const sendMessage = useCallback((conversationId, content, messageType = 'text') => {\r\n    if (!socket || !isConnected) {\r\n      console.error('WebSocket not connected');\r\n      return false;\r\n    }\r\n\r\n    const message = {\r\n      type: 'message',\r\n      conversation_id: conversationId,\r\n      content: content,\r\n      message_type: messageType\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n    return true;\r\n  }, [socket, isConnected]);\r\n\r\n  // Send typing indicator\r\n  const sendTyping = useCallback((conversationId, isTyping) => {\r\n    if (!socket || !isConnected) return;\r\n\r\n    const message = {\r\n      type: 'typing',\r\n      conversation_id: conversationId,\r\n      is_typing: isTyping\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n  }, [socket, isConnected]);\r\n\r\n  // Mark message as read\r\n  const markAsRead = useCallback((messageId) => {\r\n    if (!socket || !isConnected) return;\r\n\r\n    const message = {\r\n      type: 'read_receipt',\r\n      message_id: messageId\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n  }, [socket, isConnected]);\r\n\r\n  // Update user status\r\n  const updateStatus = useCallback((isOnline) => {\r\n    if (!socket || !isConnected) return;\r\n\r\n    const message = {\r\n      type: 'user_status',\r\n      is_online: isOnline\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n  }, [socket, isConnected]);\r\n\r\n  // Connect when token is available\r\n  useEffect(() => {\r\n    if (token && user) {\r\n      connect();\r\n    } else {\r\n      disconnect();\r\n    }\r\n\r\n    return () => {\r\n      disconnect();\r\n    };\r\n  }, [token, user, connect, disconnect]);\r\n\r\n  // Update online status when connection changes\r\n  useEffect(() => {\r\n    if (isConnected && user) {\r\n      updateStatus(true);\r\n    }\r\n    \r\n    return () => {\r\n      if (user) {\r\n        updateStatus(false);\r\n      }\r\n    };\r\n  }, [isConnected, user, updateStatus]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      disconnect();\r\n    };\r\n  }, [disconnect]);\r\n\r\n  return {\r\n    socket,\r\n    isConnected,\r\n    messages,\r\n    setMessages,\r\n    conversations,\r\n    setConversations,\r\n    typingUsers,\r\n    onlineUsers,\r\n    sendMessage,\r\n    sendTyping,\r\n    markAsRead,\r\n    updateStatus,\r\n    connect,\r\n    disconnect\r\n  };\r\n};\r\n\r\nexport default useWebSocket;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/app/chat/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { AuthProvider, useAuth } from '../../src/contexts/AuthContext';\r\nimport useWebSocket from '../../src/hooks/useWebSocket';\r\n\r\nfunction ChatContent() {\r\n  const { user } = useAuth();\r\n  const {\r\n    isConnected,\r\n    messages,\r\n    sendMessage,\r\n    sendTyping,\r\n    markAsRead,\r\n    onlineUsers\r\n  } = useWebSocket();\r\n  \r\n  const [conversations, setConversations] = useState([]);\r\n  const [selectedConversation, setSelectedConversation] = useState(null);\r\n  const [messageInput, setMessageInput] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n\r\n  const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\r\n\r\n  // Fetch conversations\r\n  useEffect(() => {\r\n    const fetchConversations = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const response = await fetch(`${API_URL}/conversations`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setConversations(data.conversations || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch conversations:', error);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchConversations();\r\n    }\r\n  }, [user, API_URL]);\r\n\r\n  // Scroll to bottom of messages\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Handle typing indicator\r\n  const handleTyping = (value: string) => {\r\n    setMessageInput(value);\r\n    \r\n    if (!isTyping && value.length > 0) {\r\n      setIsTyping(true);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, true);\r\n      }\r\n    }\r\n\r\n    if (value.length === 0) {\r\n      setIsTyping(false);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, false);\r\n      }\r\n    }\r\n\r\n    // Clear typing timeout\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n\r\n    // Set typing timeout to stop typing indicator after 1 second of inactivity\r\n    typingTimeoutRef.current = setTimeout(() => {\r\n      setIsTyping(false);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, false);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  // Send message\r\n  const handleSendMessage = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!messageInput.trim() || !selectedConversation) return;\r\n\r\n    const success = sendMessage(selectedConversation.conversation_id, messageInput.trim());\r\n    \r\n    if (success) {\r\n      setMessageInput('');\r\n      setIsTyping(false);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Select conversation\r\n  const selectConversation = async (conversation: any) => {\r\n    setSelectedConversation(conversation);\r\n    \r\n    // Fetch messages for this conversation\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`${API_URL}/conversations/${conversation.conversation_id}/messages`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('Fetched messages:', data.messages);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch messages:', error);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div>Please login to access chat</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen border border-gray-300\">\r\n      {/* Conversations List */}\r\n      <div className=\"w-80 border-r border-gray-300 overflow-y-auto\">\r\n        <div className=\"p-4 border-b border-gray-300 font-bold flex justify-between items-center\">\r\n          Conversations\r\n          <span className={`text-sm ${isConnected ? 'text-green-500' : 'text-red-500'}`}>\r\n            {isConnected ? 'Online' : 'Offline'}\r\n          </span>\r\n        </div>\r\n        \r\n        {conversations.map((conv: any) => (\r\n          <div\r\n            key={conv.conversation_id}\r\n            onClick={() => selectConversation(conv)}\r\n            className={`p-4 border-b border-gray-200 cursor-pointer ${\r\n              selectedConversation?.conversation_id === conv.conversation_id ? 'bg-gray-100' : 'bg-white'\r\n            }`}\r\n          >\r\n            <div className=\"font-bold flex justify-between items-center\">\r\n              {conv.other_user_name}\r\n              <span className={`text-sm ${onlineUsers.has(conv.other_user_id) ? 'text-green-500' : 'text-gray-500'}`}>\r\n                {onlineUsers.has(conv.other_user_id) ? 'Online' : 'Offline'}\r\n              </span>\r\n            </div>\r\n            <div className=\"text-sm text-gray-600 truncate\">\r\n              {conv.last_message || 'No messages yet'}\r\n            </div>\r\n            {conv.unread_count > 0 && (\r\n              <div className=\"inline-flex items-center justify-center w-5 h-5 bg-red-500 text-white rounded-full text-xs mt-2\">\r\n                {conv.unread_count}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Chat Area */}\r\n      <div className=\"flex-1 flex flex-col\">\r\n        {selectedConversation ? (\r\n          <>\r\n            {/* Chat Header */}\r\n            <div className=\"p-4 border-b border-gray-300 font-bold flex justify-between items-center\">\r\n              <div>\r\n                {selectedConversation.other_user_name}\r\n                <span className={`text-sm ml-2 ${onlineUsers.has(selectedConversation.other_user_id) ? 'text-green-500' : 'text-gray-500'}`}>\r\n                  {onlineUsers.has(selectedConversation.other_user_id) ? 'Online' : 'Offline'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Messages */}\r\n            <div className=\"flex-1 p-4 overflow-y-auto bg-gray-50\">\r\n              {messages.map((message: any) => (\r\n                <div\r\n                  key={message.id}\r\n                  className={`mb-3 flex ${\r\n                    message.sender_id === user?.id ? 'justify-end' : 'justify-start'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`max-w-xs px-3 py-2 rounded-2xl ${\r\n                      message.sender_id === user?.id ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'\r\n                    }`}\r\n                  >\r\n                    <div>{message.content}</div>\r\n                    <div className=\"text-xs opacity-70 mt-1\">\r\n                      {new Date(message.created_at).toLocaleTimeString()}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Message Input */}\r\n            <form onSubmit={handleSendMessage} className=\"p-4 border-t border-gray-300 flex\">\r\n              <input\r\n                type=\"text\"\r\n                value={messageInput}\r\n                onChange={(e) => handleTyping(e.target.value)}\r\n                placeholder=\"Type a message...\"\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-full mr-2\"\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                disabled={!messageInput.trim() || !isConnected}\r\n                className={`px-4 py-2 rounded-full text-white ${\r\n                  isConnected ? 'bg-blue-500 hover:bg-blue-600' : 'bg-gray-400 cursor-not-allowed'\r\n                }`}\r\n              >\r\n                Send\r\n              </button>\r\n            </form>\r\n          </>\r\n        ) : (\r\n          <div className=\"flex items-center justify-center h-full text-gray-600\">\r\n            Select a conversation to start chatting\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ChatPage() {\r\n  return (\r\n    <AuthProvider>\r\n      <ChatContent />\r\n    </AuthProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 869, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/node_modules/jwt-decode/build/esm/index.js"],"sourcesContent":["export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,0BAA0B;AACvC;AACA,kBAAkB,SAAS,CAAC,IAAI,GAAG;AACnC,SAAS,iBAAiB,GAAG;IACzB,OAAO,mBAAmB,KAAK,KAAK,OAAO,CAAC,QAAQ,CAAC,GAAG;QACpD,IAAI,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,IAAI,WAAW;QACnD,IAAI,KAAK,MAAM,GAAG,GAAG;YACjB,OAAO,MAAM;QACjB;QACA,OAAO,MAAM;IACjB;AACJ;AACA,SAAS,gBAAgB,GAAG;IACxB,IAAI,SAAS,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM;IAClD,OAAQ,OAAO,MAAM,GAAG;QACpB,KAAK;YACD;QACJ,KAAK;YACD,UAAU;YACV;QACJ,KAAK;YACD,UAAU;YACV;QACJ;YACI,MAAM,IAAI,MAAM;IACxB;IACA,IAAI;QACA,OAAO,iBAAiB;IAC5B,EACA,OAAO,KAAK;QACR,OAAO,KAAK;IAChB;AACJ;AACO,SAAS,UAAU,KAAK,EAAE,OAAO;IACpC,IAAI,OAAO,UAAU,UAAU;QAC3B,MAAM,IAAI,kBAAkB;IAChC;IACA,WAAW,CAAC,UAAU,CAAC,CAAC;IACxB,MAAM,MAAM,QAAQ,MAAM,KAAK,OAAO,IAAI;IAC1C,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI;IAClC,IAAI,OAAO,SAAS,UAAU;QAC1B,MAAM,IAAI,kBAAkB,CAAC,uCAAuC,EAAE,MAAM,GAAG;IACnF;IACA,IAAI;IACJ,IAAI;QACA,UAAU,gBAAgB;IAC9B,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,kDAAkD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC7G;IACA,IAAI;QACA,OAAO,KAAK,KAAK,CAAC;IACtB,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,gDAAgD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC3G;AACJ","ignoreList":[0]}}]
}