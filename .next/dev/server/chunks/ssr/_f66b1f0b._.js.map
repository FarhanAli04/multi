{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/components/seller/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport {\n  LayoutDashboard,\n  Package,\n  ShoppingCart,\n  MessageSquare,\n  Wallet,\n  BarChart3,\n  Settings,\n  LogOut,\n  X,\n} from \"lucide-react\"\n\ninterface SellerSidebarProps {\n  isMobileMenuOpen: boolean\n  onMobileMenuClose: () => void\n}\n\nexport function SellerSidebar({ isMobileMenuOpen, onMobileMenuClose }: SellerSidebarProps) {\n  const pathname = usePathname()\n\n  const menuItems = [\n    { href: \"/seller\", icon: LayoutDashboard, label: \"Dashboard\" },\n    { href: \"/seller/products\", icon: Package, label: \"Products\" },\n    { href: \"/seller/orders\", icon: ShoppingCart, label: \"Orders\" },\n    { href: \"/seller/messages\", icon: MessageSquare, label: \"Messages\" },\n    { href: \"/seller/wallet\", icon: Wallet, label: \"Wallet\" },\n    { href: \"/seller/analytics\", icon: BarChart3, label: \"Analytics\" },\n    { href: \"/seller/settings\", icon: Settings, label: \"Settings\" },\n  ]\n\n  return (\n    <>\n      {/* Mobile overlay */}\n      {isMobileMenuOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\"\n          onClick={onMobileMenuClose}\n        />\n      )}\n      \n      {/* Sidebar */}\n      <aside className={`\n        fixed lg:static inset-y-0 left-0 z-50 \n        w-64 bg-card border-r border-border min-h-screen flex flex-col\n        transform transition-transform duration-300 ease-in-out\n        ${isMobileMenuOpen ? \"translate-x-0\" : \"-translate-x-full lg:translate-x-0\"}\n      `}>\n        {/* Mobile close button */}\n        <div className=\"lg:hidden flex items-center justify-between p-4 border-b border-border\">\n          <div>\n            <h1 className=\"text-xl font-bold text-primary\">Seller Dashboard</h1>\n            <p className=\"text-sm text-muted-foreground mt-1\">Your Business</p>\n          </div>\n          <button\n            onClick={onMobileMenuClose}\n            className=\"flex items-center justify-center w-10 h-10 rounded-lg hover:bg-muted transition-colors\"\n          >\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Desktop header */}\n        <div className=\"hidden lg:block p-6 border-b border-border\">\n          <h1 className=\"text-xl font-bold text-primary\">Seller Dashboard</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">Your Business</p>\n        </div>\n\n        <nav className=\"flex-1 p-4 space-y-2 overflow-y-auto\">\n          {menuItems.map((item) => {\n            const Icon = item.icon\n            const isActive = pathname === item.href\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                onClick={onMobileMenuClose}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                  isActive ? \"bg-primary text-primary-foreground\" : \"text-foreground hover:bg-muted\"\n                }`}\n              >\n                <Icon size={20} />\n                <span className=\"font-medium\">{item.label}</span>\n              </Link>\n            )\n          })}\n        </nav>\n\n        <div className=\"p-4 border-t border-border\">\n          <button className=\"flex items-center gap-3 w-full px-4 py-3 text-danger hover:bg-muted rounded-lg transition-colors\">\n            <LogOut size={20} />\n            <span className=\"font-medium\">Logout</span>\n          </button>\n        </div>\n      </aside>\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAqBO,SAAS,cAAc,EAAE,gBAAgB,EAAE,iBAAiB,EAAsB;IACvF,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,YAAY;QAChB;YAAE,MAAM;YAAW,MAAM,+OAAe;YAAE,OAAO;QAAY;QAC7D;YAAE,MAAM;YAAoB,MAAM,mNAAO;YAAE,OAAO;QAAW;QAC7D;YAAE,MAAM;YAAkB,MAAM,sOAAY;YAAE,OAAO;QAAS;QAC9D;YAAE,MAAM;YAAoB,MAAM,yOAAa;YAAE,OAAO;QAAW;QACnE;YAAE,MAAM;YAAkB,MAAM,gNAAM;YAAE,OAAO;QAAS;QACxD;YAAE,MAAM;YAAqB,MAAM,+NAAS;YAAE,OAAO;QAAY;QACjE;YAAE,MAAM;YAAoB,MAAM,sNAAQ;YAAE,OAAO;QAAW;KAC/D;IAED,qBACE;;YAEG,kCACC,8OAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAKb,8OAAC;gBAAM,WAAW,CAAC;;;;QAIjB,EAAE,mBAAmB,kBAAkB,qCAAqC;MAC9E,CAAC;;kCAEC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAiC;;;;;;kDAC/C,8OAAC;wCAAE,WAAU;kDAAqC;;;;;;;;;;;;0CAEpD,8OAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8OAAC,iMAAC;oCAAC,MAAM;;;;;;;;;;;;;;;;;kCAKb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAE,WAAU;0CAAqC;;;;;;;;;;;;kCAGpD,8OAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,OAAO,KAAK,IAAI;4BACtB,MAAM,WAAW,aAAa,KAAK,IAAI;4BACvC,qBACE,8OAAC,uKAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,SAAS;gCACT,WAAW,CAAC,+DAA+D,EACzE,WAAW,uCAAuC,kCAClD;;kDAEF,8OAAC;wCAAK,MAAM;;;;;;kDACZ,8OAAC;wCAAK,WAAU;kDAAe,KAAK,KAAK;;;;;;;+BARpC,KAAK,IAAI;;;;;wBAWpB;;;;;;kCAGF,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAO,WAAU;;8CAChB,8OAAC,oNAAM;oCAAC,MAAM;;;;;;8CACd,8OAAC;oCAAK,WAAU;8CAAc;;;;;;;;;;;;;;;;;;;;;;;;;AAM1C"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/components/seller/header.tsx"],"sourcesContent":["\"use client\"\n\nimport { Bell, User, Menu, X } from \"lucide-react\"\nimport { useState } from \"react\"\n\ninterface SellerHeaderProps {\n  onMobileMenuToggle: () => void\n  isMobileMenuOpen: boolean\n}\n\nexport function SellerHeader({ onMobileMenuToggle, isMobileMenuOpen }: SellerHeaderProps) {\n  return (\n    <header className=\"bg-card border-b border-border h-16 flex items-center justify-between px-4 md:px-6 sticky top-0 z-40\">\n      <div className=\"flex items-center gap-4\">\n        {/* Mobile menu toggle */}\n        <button\n          onClick={onMobileMenuToggle}\n          className=\"lg:hidden flex items-center justify-center w-10 h-10 rounded-lg hover:bg-muted transition-colors\"\n        >\n          {isMobileMenuOpen ? <X size={20} /> : <Menu size={20} />}\n        </button>\n        \n        <div>\n          <h2 className=\"text-lg font-semibold text-foreground truncate\">Welcome to Your Store</h2>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-3 md:gap-6\">\n        <button className=\"relative text-muted-foreground hover:text-foreground transition-colors\">\n          <Bell size={20} />\n          <span className=\"absolute top-0 right-0 w-2 h-2 bg-warning rounded-full\"></span>\n        </button>\n\n        <button className=\"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-muted transition-colors\">\n          <User size={20} className=\"text-muted-foreground\" />\n          <span className=\"text-sm font-medium hidden sm:inline\">Seller</span>\n        </button>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAFA;;;AAUO,SAAS,aAAa,EAAE,kBAAkB,EAAE,gBAAgB,EAAqB;IACtF,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAET,iCAAmB,8OAAC,iMAAC;4BAAC,MAAM;;;;;iDAAS,8OAAC,0MAAI;4BAAC,MAAM;;;;;;;;;;;kCAGpD,8OAAC;kCACC,cAAA,8OAAC;4BAAG,WAAU;sCAAiD;;;;;;;;;;;;;;;;;0BAInE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,0MAAI;gCAAC,MAAM;;;;;;0CACZ,8OAAC;gCAAK,WAAU;;;;;;;;;;;;kCAGlB,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,0MAAI;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC1B,8OAAC;gCAAK,WAAU;0CAAuC;;;;;;;;;;;;;;;;;;;;;;;;AAKjE"}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/app/seller/messages/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport { SellerSidebar } from \"@/components/seller/sidebar\"\r\nimport { SellerHeader } from \"@/components/seller/header\"\r\nimport { Search, Send, Paperclip, Mail, Reply, Trash2, Archive } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\r\n\r\ninterface Conversation {\r\n  conversation_id: number\r\n  created_at?: string\r\n  updated_at?: string\r\n  other_user_id: number\r\n  other_user_name: string\r\n  other_user_email: string\r\n  other_user_avatar?: string\r\n  other_user_online?: number | boolean\r\n  last_message?: string\r\n  last_message_at?: string\r\n  unread_count?: number\r\n}\r\n\r\ninterface ChatMessage {\r\n  id: number\r\n  conversation_id: number\r\n  sender_id: number\r\n  content: string\r\n  message_type?: string\r\n  created_at: string\r\n  sender_name?: string\r\n  sender_avatar?: string\r\n  is_read?: boolean\r\n}\r\n\r\nexport default function SellerMessagesPage() {\r\n  const [me, setMe] = useState<any>(null)\r\n  const [conversations, setConversations] = useState<Conversation[]>([])\r\n  const [selectedConversation, setSelectedConversation] = useState<Conversation | null>(null)\r\n  const [threadMessages, setThreadMessages] = useState<ChatMessage[]>([])\r\n  const [isLoadingConversations, setIsLoadingConversations] = useState(true)\r\n  const [isLoadingMessages, setIsLoadingMessages] = useState(false)\r\n  const [error, setError] = useState(\"\")\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const [replyText, setReplyText] = useState(\"\")\r\n  const [showReplyBox, setShowReplyBox] = useState(false)\r\n  const messagesEndRef = useRef<HTMLDivElement | null>(null)\r\n\r\n  useEffect(() => {\r\n    let cancelled = false\r\n\r\n    const load = async () => {\r\n      try {\r\n        setIsLoadingConversations(true)\r\n        setError(\"\")\r\n\r\n        const [meRes, convRes] = await Promise.all([fetch(\"/api/backend/auth/me\"), fetch(\"/api/backend/conversations\")])\r\n\r\n        const meData = await meRes.json().catch(() => null)\r\n        const convData = await convRes.json().catch(() => null)\r\n\r\n        if (!meRes.ok) {\r\n          throw new Error(meData?.error || \"Failed to load user\")\r\n        }\r\n\r\n        if (!convRes.ok) {\r\n          throw new Error(convData?.error || \"Failed to load conversations\")\r\n        }\r\n\r\n        if (cancelled) return\r\n        setMe(meData?.user || null)\r\n        setConversations(Array.isArray(convData?.conversations) ? convData.conversations : [])\r\n      } catch (e: any) {\r\n        if (cancelled) return\r\n        setError(e?.message || \"Failed to load messages\")\r\n      } finally {\r\n        if (cancelled) return\r\n        setIsLoadingConversations(false)\r\n      }\r\n    }\r\n\r\n    load()\r\n    return () => {\r\n      cancelled = true\r\n    }\r\n  }, [])\r\n\r\n  const filteredConversations = useMemo(() => {\r\n    const s = searchTerm.trim().toLowerCase()\r\n    if (!s) return conversations\r\n    return conversations.filter((c) => {\r\n      return (\r\n        (c.other_user_name || \"\").toLowerCase().includes(s) ||\r\n        (c.other_user_email || \"\").toLowerCase().includes(s) ||\r\n        (c.last_message || \"\").toLowerCase().includes(s)\r\n      )\r\n    })\r\n  }, [conversations, searchTerm])\r\n\r\n  const selectConversation = async (conv: Conversation) => {\r\n    setSelectedConversation(conv)\r\n    setShowReplyBox(false)\r\n    setReplyText(\"\")\r\n    setIsLoadingMessages(true)\r\n    setError(\"\")\r\n\r\n    try {\r\n      const res = await fetch(`/api/backend/conversations/${conv.conversation_id}/messages`)\r\n      const data = await res.json().catch(() => null)\r\n      if (!res.ok) {\r\n        throw new Error(data?.error || \"Failed to load conversation messages\")\r\n      }\r\n      const msgs = Array.isArray(data?.messages) ? data.messages : []\r\n      setThreadMessages(msgs)\r\n      setConversations((prev) =>\r\n        prev.map((c) => (c.conversation_id === conv.conversation_id ? { ...c, unread_count: 0 } : c)),\r\n      )\r\n      setTimeout(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n      }, 0)\r\n    } catch (e: any) {\r\n      setError(e?.message || \"Failed to load messages\")\r\n    } finally {\r\n      setIsLoadingMessages(false)\r\n    }\r\n  }\r\n\r\n  const deleteConversationLocal = (conversationId: number) => {\r\n    setConversations((prev) => prev.filter((c) => c.conversation_id !== conversationId))\r\n    if (selectedConversation?.conversation_id === conversationId) {\r\n      setSelectedConversation(null)\r\n      setThreadMessages([])\r\n    }\r\n  }\r\n\r\n  const sendReply = async () => {\r\n    if (!selectedConversation) return\r\n    if (!replyText.trim()) return\r\n\r\n    try {\r\n      const res = await fetch(\"/api/backend/messages\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ conversation_id: selectedConversation.conversation_id, content: replyText.trim() }),\r\n      })\r\n      const data = await res.json().catch(() => null)\r\n      if (!res.ok) {\r\n        throw new Error(data?.error || \"Failed to send message\")\r\n      }\r\n\r\n      const newMsg = data?.message\r\n      if (newMsg) {\r\n        setThreadMessages((prev) => [...prev, newMsg])\r\n        setConversations((prev) =>\r\n          prev.map((c) =>\r\n            c.conversation_id === selectedConversation.conversation_id\r\n              ? { ...c, last_message: newMsg.content, last_message_at: newMsg.created_at }\r\n              : c,\r\n          ),\r\n        )\r\n        setTimeout(() => {\r\n          messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n        }, 0)\r\n      }\r\n\r\n      setReplyText(\"\")\r\n      setShowReplyBox(false)\r\n    } catch (e: any) {\r\n      setError(e?.message || \"Failed to send message\")\r\n    }\r\n  }\r\n\r\n  const formatTime = (iso?: string) => {\r\n    if (!iso) return \"\"\r\n    const d = new Date(iso)\r\n    if (Number.isNaN(d.getTime())) return \"\"\r\n    return d.toLocaleString()\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex bg-background\">\r\n      <SellerSidebar />\r\n\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <SellerHeader />\r\n\r\n        <main className=\"flex-1 p-8\">\r\n          <div className=\"mb-8 flex justify-between items-center\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold mb-2\">Messages</h1>\r\n              <p className=\"text-muted-foreground\">Communicate with your customers</p>\r\n            </div>\r\n            <div className=\"flex gap-4 items-center\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" size={18} />\r\n                <Input\r\n                  placeholder=\"Search messages...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"pl-10 w-64\"\r\n                />\r\n              </div>\r\n              <Button variant=\"outline\">\r\n                <Archive className=\"mr-2 h-4 w-4\" />\r\n                Archive All\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {error ? (\r\n            <Card className=\"mb-6\">\r\n              <CardContent className=\"p-4\">\r\n                <p className=\"text-sm text-destructive\">{error}</p>\r\n              </CardContent>\r\n            </Card>\r\n          ) : null}\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n            {/* Messages List */}\r\n            <div className=\"lg:col-span-1\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Inbox</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"p-0\">\r\n                  <div className=\"divide-y divide-border\">\r\n                    {isLoadingConversations ? (\r\n                      <div className=\"p-4 text-sm text-muted-foreground\">Loading conversations...</div>\r\n                    ) : filteredConversations.length === 0 ? (\r\n                      <div className=\"p-4 text-sm text-muted-foreground\">No conversations yet.</div>\r\n                    ) : (\r\n                      filteredConversations.map((conv) => (\r\n                        <div\r\n                          key={conv.conversation_id}\r\n                          className={`p-4 cursor-pointer hover:bg-muted transition-colors ${\r\n                            selectedConversation?.conversation_id === conv.conversation_id ? \"bg-muted\" : \"\"\r\n                          } ${Number(conv.unread_count || 0) > 0 ? \"border-l-4 border-primary\" : \"\"}`}\r\n                          onClick={() => selectConversation(conv)}\r\n                        >\r\n                          <div className=\"flex items-start justify-between mb-2\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Avatar className=\"h-8 w-8\">\r\n                                <AvatarImage src={conv.other_user_avatar} />\r\n                                <AvatarFallback>{(conv.other_user_name || \"?\").charAt(0)}</AvatarFallback>\r\n                              </Avatar>\r\n                              <div>\r\n                                <p className=\"font-medium text-sm\">{conv.other_user_name}</p>\r\n                                <p className=\"text-xs text-muted-foreground\">{formatTime(conv.last_message_at || conv.updated_at)}</p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex gap-2 items-center\">\r\n                              {Number(conv.unread_count || 0) > 0 ? (\r\n                                <Badge variant=\"secondary\" className=\"text-xs\">\r\n                                  {conv.unread_count} new\r\n                                </Badge>\r\n                              ) : null}\r\n                            </div>\r\n                          </div>\r\n                          <p className=\"text-sm font-medium mb-1 line-clamp-1\">Conversation</p>\r\n                          <p className=\"text-xs text-muted-foreground line-clamp-2\">{conv.last_message || \"No messages yet\"}</p>\r\n                        </div>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Message Detail */}\r\n            <div className=\"lg:col-span-2\">\r\n              {selectedConversation ? (\r\n                <Card>\r\n                  <CardHeader>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <Avatar className=\"h-10 w-10\">\r\n                          <AvatarImage src={selectedConversation.other_user_avatar} />\r\n                          <AvatarFallback>{(selectedConversation.other_user_name || \"?\").charAt(0)}</AvatarFallback>\r\n                        </Avatar>\r\n                        <div>\r\n                          <CardTitle className=\"text-lg\">{selectedConversation.other_user_name}</CardTitle>\r\n                          <p className=\"text-sm text-muted-foreground\">{selectedConversation.other_user_email}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex gap-2\">\r\n                        <Button variant=\"ghost\" size=\"sm\">\r\n                          <Reply className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => deleteConversationLocal(selectedConversation.conversation_id)}\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"border rounded-lg p-4 bg-muted/30 max-h-[360px] overflow-y-auto\">\r\n                        {isLoadingMessages ? (\r\n                          <div className=\"text-sm text-muted-foreground\">Loading messages...</div>\r\n                        ) : threadMessages.length === 0 ? (\r\n                          <div className=\"text-sm text-muted-foreground\">No messages yet.</div>\r\n                        ) : (\r\n                          <div className=\"space-y-2\">\r\n                            {threadMessages.map((m) => {\r\n                              const isMine = me?.id != null && Number(m.sender_id) === Number(me.id)\r\n                              return (\r\n                                <div key={m.id} className={`flex ${isMine ? \"justify-end\" : \"justify-start\"}`}>\r\n                                  <div\r\n                                    className={`max-w-[80%] rounded-lg px-3 py-2 text-sm ${\r\n                                      isMine ? \"bg-primary text-primary-foreground\" : \"bg-background border\"\r\n                                    }`}\r\n                                  >\r\n                                    <div>{m.content}</div>\r\n                                    <div className={`mt-1 text-[11px] ${isMine ? \"opacity-80\" : \"text-muted-foreground\"}`}>\r\n                                      {formatTime(m.created_at)}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              )\r\n                            })}\r\n                            <div ref={messagesEndRef} />\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Reply Box */}\r\n                      <div className=\"border-t pt-4\">\r\n                        {!showReplyBox ? (\r\n                          <Button onClick={() => setShowReplyBox(true)} className=\"w-full\">\r\n                            <Reply className=\"mr-2 h-4 w-4\" />\r\n                            Reply to Message\r\n                          </Button>\r\n                        ) : (\r\n                          <div className=\"space-y-3\">\r\n                            <Textarea\r\n                              placeholder=\"Type your reply...\"\r\n                              value={replyText}\r\n                              onChange={(e) => setReplyText(e.target.value)}\r\n                              className=\"min-h-[100px]\"\r\n                            />\r\n                            <div className=\"flex gap-2\">\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                <Paperclip className=\"mr-2 h-4 w-4\" />\r\n                                Attach File\r\n                              </Button>\r\n                              <div className=\"flex-1\"></div>\r\n                              <Button variant=\"outline\" onClick={() => setShowReplyBox(false)}>\r\n                                Cancel\r\n                              </Button>\r\n                              <Button onClick={sendReply}>\r\n                                <Send className=\"mr-2 h-4 w-4\" />\r\n                                Send Reply\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ) : (\r\n                <Card>\r\n                  <CardContent className=\"flex items-center justify-center h-96\">\r\n                    <div className=\"text-center\">\r\n                      <Mail className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n                      <p className=\"text-muted-foreground\">Select a message to view details</p>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}