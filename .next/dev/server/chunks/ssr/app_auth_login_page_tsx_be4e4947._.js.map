{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Clients%20era/CURRENT/v0-multi-vendor-e-commerce-website-main/v0-multi-vendor-e-commerce-website-main/app/auth/login/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport Link from \"next/link\"\nimport { Suspense, useEffect, useState } from \"react\"\nimport { Mail, Lock, Eye, EyeOff, AlertCircle, CheckCircle } from \"lucide-react\"\nimport { useRouter, useSearchParams } from \"next/navigation\"\n\nfunction LoginPageInner() {\n  const [showPassword, setShowPassword] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [success, setSuccess] = useState(false)\n  const router = useRouter()\n  const searchParams = useSearchParams()\n\n  // Get role from URL params for context\n  const role = searchParams.get(\"role\") || \"\"\n\n  useEffect(() => {\n    let cancelled = false\n\n    const checkSession = async () => {\n      try {\n        const res = await fetch(\"/api/backend/auth/me\")\n        const data = await res.json().catch(() => null)\n\n        if (cancelled) return\n        if (!res.ok || !data?.user?.role) return\n\n        const currentRole = String(data.user.role || \"\")\n        const wantedRole = role ? String(role) : \"\"\n\n        if (wantedRole && currentRole && wantedRole !== currentRole) {\n          return\n        }\n\n        if (currentRole === \"seller\") {\n          router.push(\"/seller\")\n        } else if (currentRole === \"admin\") {\n          router.push(\"/admin-panel\")\n        } else {\n          router.push(\"/customer\")\n        }\n      } catch {\n        // Ignore - user is not logged in or backend is unavailable\n      }\n    }\n\n    checkSession()\n    return () => {\n      cancelled = true\n    }\n  }, [router, role])\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setError(\"\")\n    setIsLoading(true)\n\n    const formData = new FormData(e.currentTarget)\n    const email = formData.get(\"email\") as string\n    const password = formData.get(\"password\") as string\n\n    try {\n      const response = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ email, password }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        setError(data.error || \"Login failed\")\n        setIsLoading(false)\n        return\n      }\n\n      setSuccess(true)\n      \n      // Redirect based on user role after successful login\n      setTimeout(() => {\n        if (data.user.role === \"seller\") {\n          router.push(\"/seller\")\n        } else if (data.user.role === \"admin\") {\n          router.push(\"/admin-panel\")\n        } else {\n          router.push(\"/customer\")\n        }\n      }, 1500)\n\n    } catch (err) {\n      setError(\"An error occurred. Please try again.\")\n      console.log(\"[v0] Login error:\", err)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center px-6\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"text-center mb-8\">\n          <Link href=\"/\" className=\"text-3xl font-bold text-primary mb-4 inline-block\">\n            SAR Store\n          </Link>\n          <h1 className=\"text-2xl font-bold\">Welcome Back</h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Sign in to your {role ? `${role} ` : \"\"}account\n          </p>\n        </div>\n\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-3\">\n            <AlertCircle size={20} className=\"text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-red-700 dark:text-red-400 text-sm\">{error}</p>\n          </div>\n        )}\n\n        {success && (\n          <div className=\"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-start gap-3\">\n            <CheckCircle size={20} className=\"text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-green-700 dark:text-green-400 text-sm\">Login successful! Redirecting...</p>\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Email Address</label>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" size={18} />\n              <input \n                type=\"email\" \n                name=\"email\"\n                placeholder=\"your@email.com\" \n                className=\"input pl-10 w-full\" \n                required \n                disabled={isLoading || success}\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Password</label>\n            <div className=\"relative\">\n              <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" size={18} />\n              <input\n                type={showPassword ? \"text\" : \"password\"}\n                name=\"password\"\n                placeholder=\"••••••••\"\n                className=\"input pl-10 pr-10 w-full\"\n                required\n                disabled={isLoading || success}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                disabled={isLoading || success}\n              >\n                {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"flex justify-between items-center\">\n            <label className=\"flex items-center gap-2\">\n              <input type=\"checkbox\" className=\"w-4 h-4\" disabled={isLoading || success} />\n              <span className=\"text-sm\">Remember me</span>\n            </label>\n            <Link href=\"#\" className=\"text-sm text-primary hover:underline\">\n              Forgot Password?\n            </Link>\n          </div>\n\n          <button type=\"submit\" disabled={isLoading || success} className=\"btn-primary w-full mt-6\">\n            {isLoading ? \"Signing in...\" : success ? \"Success!\" : \"Sign In\"}\n          </button>\n        </form>\n\n        <div className=\"relative my-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"w-full border-t border-border\"></div>\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"px-2 bg-background text-muted-foreground\">Or</span>\n          </div>\n        </div>\n\n        <button className=\"w-full btn-secondary mb-4\" disabled={isLoading || success}>\n          Continue with Google\n        </button>\n\n        <div className=\"text-center space-y-2\">\n          <p className=\"text-sm text-muted-foreground\">\n            Don't have an account?{\" \"}\n            <Link href={`/auth/register?role=${role || \"customer\"}`} className=\"text-primary hover:underline font-medium\">\n              Sign Up\n            </Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default function LoginPage() {\n  return (\n    <Suspense>\n      <LoginPageInner />\n    </Suspense>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}