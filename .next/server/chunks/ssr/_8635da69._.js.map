{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/trash-2.ts","../../../../node_modules/lucide-react/src/icons/rotate-cw.ts","../../../../app/admin-panel/cache/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA2aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOSA2djE0YzAgMS0xIDItMiAySDdjLTEgMC0yLTEtMi0yVjYiIC8+CiAgPHBhdGggZD0iTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MiIgLz4KICA8bGluZSB4MT0iMTAiIHgyPSIxMCIgeTE9IjExIiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjE3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('Trash2', [\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6', key: '4alrt4' }],\n  ['path', { d: 'M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2', key: 'v07s0e' }],\n  ['line', { x1: '10', x2: '10', y1: '11', y2: '17', key: '1uufr5' }],\n  ['line', { x1: '14', x2: '14', y1: '11', y2: '17', key: 'xtxkd' }],\n]);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name RotateCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTktOWMyLjUyIDAgNC45MyAxIDYuNzQgMi43NEwyMSA4IiAvPgogIDxwYXRoIGQ9Ik0yMSAzdjVoLTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/rotate-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCw = createLucideIcon('RotateCw', [\n  ['path', { d: 'M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8', key: '1p45f6' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n]);\n\nexport default RotateCw;\n","\"use client\"\n\nimport { Trash2, RotateCw } from \"lucide-react\"\nimport { useEffect, useState } from \"react\"\n\nexport default function CacheManagement() {\n  const [clearing, setClearing] = useState(false)\n\n  const [cacheItems, setCacheItems] = useState<Array<{ name: string; description: string; last_cleared_at?: string }>>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [success, setSuccess] = useState(\"\")\n\n  const defaultCacheItems = () => [\n    { name: \"Page Cache\", description: \"Cached page content\" },\n    { name: \"Product Cache\", description: \"Product listings and details\" },\n    { name: \"Image Cache\", description: \"Optimized product images\" },\n    { name: \"Database Cache\", description: \"Query results\" },\n  ]\n\n  useEffect(() => {\n    let cancelled = false\n    const load = async () => {\n      try {\n        setIsLoading(true)\n        setError(\"\")\n        setSuccess(\"\")\n        const res = await fetch(\"/api/settings\")\n        const data = await res.json().catch(() => null)\n        if (!data?.success) {\n          throw new Error(data?.message || \"Failed to load settings\")\n        }\n        const cs = data?.data?.cache_settings || {}\n        const list = Array.isArray(cs.cacheItems) ? cs.cacheItems : []\n        if (!cancelled) setCacheItems(list)\n      } catch (e: any) {\n        if (!cancelled) setError(e?.message || \"Failed to load settings\")\n      } finally {\n        if (!cancelled) setIsLoading(false)\n      }\n    }\n    load()\n    return () => {\n      cancelled = true\n    }\n  }, [])\n\n  const touchClear = async (name: string) => {\n    try {\n      setError(\"\")\n      setSuccess(\"\")\n      const now = new Date().toISOString()\n      const base = cacheItems.length ? cacheItems : defaultCacheItems()\n      const next = base.map((it) => (it.name === name ? { ...it, last_cleared_at: now } : it))\n      setCacheItems(next)\n      const res = await fetch(\"/api/settings\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          cache_settings: { cacheItems: next },\n        }),\n      })\n      const data = await res.json().catch(() => null)\n      if (!data?.success) {\n        throw new Error(data?.message || \"Failed to update settings\")\n      }\n      setSuccess(\"Updated\")\n    } catch (e: any) {\n      setError(e?.message || \"Failed\")\n    }\n  }\n\n  const effectiveItems = cacheItems.length ? cacheItems : defaultCacheItems()\n\n  const clearAll = async () => {\n    try {\n      setClearing(true)\n      setError(\"\")\n      setSuccess(\"\")\n      const now = new Date().toISOString()\n      const next = effectiveItems.map((it) => ({ ...it, last_cleared_at: now }))\n      setCacheItems(next)\n\n      const res = await fetch(\"/api/settings\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          cache_settings: { cacheItems: next },\n        }),\n      })\n      const data = await res.json().catch(() => null)\n      if (!data?.success) {\n        throw new Error(data?.message || \"Failed\")\n      }\n      setSuccess(\"Updated\")\n    } catch (e: any) {\n      setError(e?.message || \"Failed\")\n    } finally {\n      setClearing(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Clear Cache</h1>\n        <p className=\"text-muted-foreground mt-1\">Improve performance by managing system cache</p>\n      </div>\n\n      {isLoading ? <div className=\"text-muted-foreground\">Loading...</div> : null}\n      {error ? <div className=\"rounded-lg border border-border bg-muted p-4 text-sm text-destructive\">{error}</div> : null}\n      {success ? <div className=\"rounded-lg border border-border bg-muted p-4 text-sm\">{success}</div> : null}\n\n      {/* Cache Items */}\n      <div className=\"space-y-4\">\n        {effectiveItems.map((item) => (\n          <div key={item.name} className=\"admin-panel-table p-4 flex items-center justify-between\">\n            <div>\n              <h3 className=\"font-bold\">{item.name}</h3>\n              <p className=\"text-sm text-muted-foreground\">{item.description}</p>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Last cleared: {item.last_cleared_at ? new Date(item.last_cleared_at).toLocaleString() : \"â€”\"}\n              </p>\n            </div>\n            <button\n              className=\"admin-panel-btn-danger flex items-center gap-2\"\n              onClick={() => touchClear(item.name)}\n              disabled={isLoading}\n            >\n              <Trash2 size={18} />\n              Clear\n            </button>\n          </div>\n        ))}\n      </div>\n\n      {/* Clear All */}\n      <div className=\"admin-panel-table p-6 bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-200 dark:border-orange-900\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"font-bold text-lg\">Clear All Cache</h3>\n            <p className=\"text-sm text-muted-foreground\">This will clear all cached data. Use cautiously.</p>\n          </div>\n          <button className=\"admin-panel-btn-danger flex items-center gap-2\" onClick={clearAll} disabled={clearing || isLoading}>\n            {clearing ? (\n              <>\n                <RotateCw size={18} className=\"animate-spin\" />\n                Clearing...\n              </>\n            ) : (\n              <>\n                <Trash2 size={18} />\n                Clear All\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1]}