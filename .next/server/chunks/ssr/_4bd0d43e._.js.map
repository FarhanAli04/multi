{"version":3,"sources":["../../../../src/contexts/AuthContext.js","../../../../node_modules/jwt-decode/build/esm/index.js","../../../../app/chat/page.tsx","../../../../src/hooks/useWebSocket.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\n// Initial state\r\nconst initialState = {\r\n  user: null,\r\n  token: typeof window !== 'undefined' ? localStorage.getItem('token') : null,\r\n  isAuthenticated: false,\r\n  isLoading: true,\r\n  error: null\r\n};\r\n\r\n// Action types\r\nconst AUTH_ACTIONS = {\r\n  LOGIN_START: 'LOGIN_START',\r\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\r\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\r\n  LOGOUT: 'LOGOUT',\r\n  REGISTER_START: 'REGISTER_START',\r\n  REGISTER_SUCCESS: 'REGISTER_SUCCESS',\r\n  REGISTER_FAILURE: 'REGISTER_FAILURE',\r\n  LOAD_USER: 'LOAD_USER',\r\n  LOAD_USER_SUCCESS: 'LOAD_USER_SUCCESS',\r\n  LOAD_USER_FAILURE: 'LOAD_USER_FAILURE',\r\n  CLEAR_ERROR: 'CLEAR_ERROR'\r\n};\r\n\r\n// Reducer\r\nconst authReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case AUTH_ACTIONS.LOGIN_START:\r\n    case AUTH_ACTIONS.REGISTER_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\r\n    case AUTH_ACTIONS.REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        token: action.payload.token,\r\n        isAuthenticated: true,\r\n        isLoading: false,\r\n        error: null\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOGIN_FAILURE:\r\n    case AUTH_ACTIONS.REGISTER_FAILURE:\r\n    case AUTH_ACTIONS.LOAD_USER_FAILURE:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: action.payload\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOGOUT:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: null\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOAD_USER:\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      };\r\n    \r\n    case AUTH_ACTIONS.LOAD_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload,\r\n        isAuthenticated: true,\r\n        isLoading: false\r\n      };\r\n    \r\n    case AUTH_ACTIONS.CLEAR_ERROR:\r\n      return {\r\n        ...state,\r\n        error: null\r\n      };\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Create context\r\nconst AuthContext = createContext();\r\n\r\n// Provider component\r\nexport const AuthProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n  // API base URL\r\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\r\n\r\n  // Load user from token\r\n  useEffect(() => {\r\n    const loadUser = async () => {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        dispatch({ type: AUTH_ACTIONS.LOAD_USER_FAILURE, payload: 'No token found' });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Check if token is expired\r\n        const decoded = jwtDecode(token);\r\n        if (decoded.exp * 1000 < Date.now()) {\r\n          localStorage.removeItem('token');\r\n          dispatch({ type: AUTH_ACTIONS.LOAD_USER_FAILURE, payload: 'Token expired' });\r\n          return;\r\n        }\r\n\r\n        // Get user data\r\n        const response = await fetch(`${API_URL}/auth/me`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to load user');\r\n        }\r\n\r\n        const data = await response.json();\r\n        \r\n        if (data.success) {\r\n          dispatch({ type: AUTH_ACTIONS.LOAD_USER_SUCCESS, payload: data.user });\r\n        } else {\r\n          throw new Error(data.error || 'Failed to load user');\r\n        }\r\n      } catch (error) {\r\n        localStorage.removeItem('token');\r\n        dispatch({ type: AUTH_ACTIONS.LOAD_USER_FAILURE, payload: error.message });\r\n      }\r\n    };\r\n\r\n    loadUser();\r\n  }, []);\r\n\r\n  // Login\r\n  const login = async (email, password) => {\r\n    dispatch({ type: AUTH_ACTIONS.LOGIN_START });\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/auth/login`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ email, password })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        localStorage.setItem('token', data.token);\r\n        dispatch({\r\n          type: AUTH_ACTIONS.LOGIN_SUCCESS,\r\n          payload: {\r\n            user: data.user,\r\n            token: data.token\r\n          }\r\n        });\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(data.error || 'Login failed');\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\r\n        payload: error.message\r\n      });\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  // Register\r\n  const register = async (userData) => {\r\n    dispatch({ type: AUTH_ACTIONS.REGISTER_START });\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/auth/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(userData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        localStorage.setItem('token', data.token);\r\n        dispatch({\r\n          type: AUTH_ACTIONS.REGISTER_SUCCESS,\r\n          payload: {\r\n            user: data.user,\r\n            token: data.token\r\n          }\r\n        });\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(data.error || 'Registration failed');\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: AUTH_ACTIONS.REGISTER_FAILURE,\r\n        payload: error.message\r\n      });\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  // Logout\r\n  const logout = () => {\r\n    localStorage.removeItem('token');\r\n    dispatch({ type: AUTH_ACTIONS.LOGOUT });\r\n  };\r\n\r\n  // Clear error\r\n  const clearError = () => {\r\n    dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\r\n  };\r\n\r\n  const value = {\r\n    ...state,\r\n    login,\r\n    register,\r\n    logout,\r\n    clearError\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n// Hook to use auth context\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","'use client';\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { AuthProvider, useAuth } from '../../src/contexts/AuthContext';\r\nimport useWebSocket from '../../src/hooks/useWebSocket';\r\n\r\nfunction ChatContent() {\r\n  const { user } = useAuth();\r\n  const {\r\n    isConnected,\r\n    messages,\r\n    sendMessage,\r\n    sendTyping,\r\n    markAsRead,\r\n    onlineUsers\r\n  } = useWebSocket();\r\n  \r\n  const [conversations, setConversations] = useState([]);\r\n  const [selectedConversation, setSelectedConversation] = useState(null);\r\n  const [messageInput, setMessageInput] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n\r\n  const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\r\n\r\n  // Fetch conversations\r\n  useEffect(() => {\r\n    const fetchConversations = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const response = await fetch(`${API_URL}/conversations`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setConversations(data.conversations || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch conversations:', error);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchConversations();\r\n    }\r\n  }, [user, API_URL]);\r\n\r\n  // Scroll to bottom of messages\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Handle typing indicator\r\n  const handleTyping = (value: string) => {\r\n    setMessageInput(value);\r\n    \r\n    if (!isTyping && value.length > 0) {\r\n      setIsTyping(true);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, true);\r\n      }\r\n    }\r\n\r\n    if (value.length === 0) {\r\n      setIsTyping(false);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, false);\r\n      }\r\n    }\r\n\r\n    // Clear typing timeout\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n\r\n    // Set typing timeout to stop typing indicator after 1 second of inactivity\r\n    typingTimeoutRef.current = setTimeout(() => {\r\n      setIsTyping(false);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, false);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  // Send message\r\n  const handleSendMessage = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!messageInput.trim() || !selectedConversation) return;\r\n\r\n    const success = sendMessage(selectedConversation.conversation_id, messageInput.trim());\r\n    \r\n    if (success) {\r\n      setMessageInput('');\r\n      setIsTyping(false);\r\n      if (selectedConversation) {\r\n        sendTyping(selectedConversation.conversation_id, false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Select conversation\r\n  const selectConversation = async (conversation: any) => {\r\n    setSelectedConversation(conversation);\r\n    \r\n    // Fetch messages for this conversation\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`${API_URL}/conversations/${conversation.conversation_id}/messages`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('Fetched messages:', data.messages);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch messages:', error);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div>Please login to access chat</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen border border-gray-300\">\r\n      {/* Conversations List */}\r\n      <div className=\"w-80 border-r border-gray-300 overflow-y-auto\">\r\n        <div className=\"p-4 border-b border-gray-300 font-bold flex justify-between items-center\">\r\n          Conversations\r\n          <span className={`text-sm ${isConnected ? 'text-green-500' : 'text-red-500'}`}>\r\n            {isConnected ? 'Online' : 'Offline'}\r\n          </span>\r\n        </div>\r\n        \r\n        {conversations.map((conv: any) => (\r\n          <div\r\n            key={conv.conversation_id}\r\n            onClick={() => selectConversation(conv)}\r\n            className={`p-4 border-b border-gray-200 cursor-pointer ${\r\n              selectedConversation?.conversation_id === conv.conversation_id ? 'bg-gray-100' : 'bg-white'\r\n            }`}\r\n          >\r\n            <div className=\"font-bold flex justify-between items-center\">\r\n              {conv.other_user_name}\r\n              <span className={`text-sm ${onlineUsers.has(conv.other_user_id) ? 'text-green-500' : 'text-gray-500'}`}>\r\n                {onlineUsers.has(conv.other_user_id) ? 'Online' : 'Offline'}\r\n              </span>\r\n            </div>\r\n            <div className=\"text-sm text-gray-600 truncate\">\r\n              {conv.last_message || 'No messages yet'}\r\n            </div>\r\n            {conv.unread_count > 0 && (\r\n              <div className=\"inline-flex items-center justify-center w-5 h-5 bg-red-500 text-white rounded-full text-xs mt-2\">\r\n                {conv.unread_count}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Chat Area */}\r\n      <div className=\"flex-1 flex flex-col\">\r\n        {selectedConversation ? (\r\n          <>\r\n            {/* Chat Header */}\r\n            <div className=\"p-4 border-b border-gray-300 font-bold flex justify-between items-center\">\r\n              <div>\r\n                {selectedConversation.other_user_name}\r\n                <span className={`text-sm ml-2 ${onlineUsers.has(selectedConversation.other_user_id) ? 'text-green-500' : 'text-gray-500'}`}>\r\n                  {onlineUsers.has(selectedConversation.other_user_id) ? 'Online' : 'Offline'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Messages */}\r\n            <div className=\"flex-1 p-4 overflow-y-auto bg-gray-50\">\r\n              {messages.map((message: any) => (\r\n                <div\r\n                  key={message.id}\r\n                  className={`mb-3 flex ${\r\n                    message.sender_id === user?.id ? 'justify-end' : 'justify-start'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`max-w-xs px-3 py-2 rounded-2xl ${\r\n                      message.sender_id === user?.id ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'\r\n                    }`}\r\n                  >\r\n                    <div>{message.content}</div>\r\n                    <div className=\"text-xs opacity-70 mt-1\">\r\n                      {new Date(message.created_at).toLocaleTimeString()}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Message Input */}\r\n            <form onSubmit={handleSendMessage} className=\"p-4 border-t border-gray-300 flex\">\r\n              <input\r\n                type=\"text\"\r\n                value={messageInput}\r\n                onChange={(e) => handleTyping(e.target.value)}\r\n                placeholder=\"Type a message...\"\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-full mr-2\"\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                disabled={!messageInput.trim() || !isConnected}\r\n                className={`px-4 py-2 rounded-full text-white ${\r\n                  isConnected ? 'bg-blue-500 hover:bg-blue-600' : 'bg-gray-400 cursor-not-allowed'\r\n                }`}\r\n              >\r\n                Send\r\n              </button>\r\n            </form>\r\n          </>\r\n        ) : (\r\n          <div className=\"flex items-center justify-center h-full text-gray-600\">\r\n            Select a conversation to start chatting\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ChatPage() {\r\n  return (\r\n    <AuthProvider>\r\n      <ChatContent />\r\n    </AuthProvider>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst useWebSocket = () => {\r\n  const { token, user } = useAuth();\r\n  const [socket, setSocket] = useState(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [conversations, setConversations] = useState([]);\r\n  const [typingUsers, setTypingUsers] = useState(new Set());\r\n  const [onlineUsers, setOnlineUsers] = useState(new Set());\r\n  const reconnectTimeoutRef = useRef(null);\r\n  const reconnectAttemptsRef = useRef(0);\r\n  const maxReconnectAttempts = 5;\r\n  const reconnectDelay = 3000;\r\n\r\n  // WebSocket URL\r\n  const wsUrl = process.env.REACT_APP_WS_URL || 'ws://localhost:8080';\r\n\r\n  // Connect to WebSocket\r\n  const connect = useCallback(() => {\r\n    if (!token) return;\r\n\r\n    try {\r\n      const ws = new WebSocket(`${wsUrl}?token=${token}`);\r\n      \r\n      ws.onopen = () => {\r\n        console.log('WebSocket connected');\r\n        setIsConnected(true);\r\n        setSocket(ws);\r\n        reconnectAttemptsRef.current = 0;\r\n      };\r\n\r\n      ws.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        \r\n        switch (data.type) {\r\n          case 'connection_established':\r\n            console.log('Connection established with user:', data.user_id);\r\n            break;\r\n\r\n          case 'message':\r\n            setMessages(prev => [...prev, data]);\r\n            break;\r\n\r\n          case 'typing':\r\n            if (data.is_typing) {\r\n              setTypingUsers(prev => new Set(prev).add(data.user_id));\r\n            } else {\r\n              setTypingUsers(prev => {\r\n                const newSet = new Set(prev);\r\n                newSet.delete(data.user_id);\r\n                return newSet;\r\n              });\r\n            }\r\n            break;\r\n\r\n          case 'read_receipt':\r\n            setMessages(prev => prev.map(msg => \r\n              msg.id === data.message_id \r\n                ? { ...msg, is_read: true, read_at: data.read_at }\r\n                : msg\r\n            ));\r\n            break;\r\n\r\n          case 'user_status':\r\n            if (data.is_online) {\r\n              setOnlineUsers(prev => new Set(prev).add(data.user_id));\r\n            } else {\r\n              setOnlineUsers(prev => {\r\n                const newSet = new Set(prev);\r\n                newSet.delete(data.user_id);\r\n                return newSet;\r\n              });\r\n            }\r\n            break;\r\n\r\n          case 'error':\r\n            console.error('WebSocket error:', data.message);\r\n            break;\r\n\r\n          default:\r\n            console.log('Unknown message type:', data.type);\r\n        }\r\n      };\r\n\r\n      ws.onclose = () => {\r\n        console.log('WebSocket disconnected');\r\n        setIsConnected(false);\r\n        setSocket(null);\r\n\r\n        // Attempt to reconnect\r\n        if (reconnectAttemptsRef.current < maxReconnectAttempts) {\r\n          reconnectTimeoutRef.current = setTimeout(() => {\r\n            reconnectAttemptsRef.current++;\r\n            console.log(`Attempting to reconnect (${reconnectAttemptsRef.current}/${maxReconnectAttempts})`);\r\n            connect();\r\n          }, reconnectDelay);\r\n        }\r\n      };\r\n\r\n      ws.onerror = (error) => {\r\n        console.error('WebSocket error:', error);\r\n        setIsConnected(false);\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Failed to connect to WebSocket:', error);\r\n    }\r\n  }, [token, wsUrl]);\r\n\r\n  // Disconnect\r\n  const disconnect = useCallback(() => {\r\n    if (reconnectTimeoutRef.current) {\r\n      clearTimeout(reconnectTimeoutRef.current);\r\n    }\r\n    \r\n    if (socket) {\r\n      socket.close();\r\n    }\r\n    \r\n    setIsConnected(false);\r\n    setSocket(null);\r\n    reconnectAttemptsRef.current = 0;\r\n  }, [socket]);\r\n\r\n  // Send message\r\n  const sendMessage = useCallback((conversationId, content, messageType = 'text') => {\r\n    if (!socket || !isConnected) {\r\n      console.error('WebSocket not connected');\r\n      return false;\r\n    }\r\n\r\n    const message = {\r\n      type: 'message',\r\n      conversation_id: conversationId,\r\n      content: content,\r\n      message_type: messageType\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n    return true;\r\n  }, [socket, isConnected]);\r\n\r\n  // Send typing indicator\r\n  const sendTyping = useCallback((conversationId, isTyping) => {\r\n    if (!socket || !isConnected) return;\r\n\r\n    const message = {\r\n      type: 'typing',\r\n      conversation_id: conversationId,\r\n      is_typing: isTyping\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n  }, [socket, isConnected]);\r\n\r\n  // Mark message as read\r\n  const markAsRead = useCallback((messageId) => {\r\n    if (!socket || !isConnected) return;\r\n\r\n    const message = {\r\n      type: 'read_receipt',\r\n      message_id: messageId\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n  }, [socket, isConnected]);\r\n\r\n  // Update user status\r\n  const updateStatus = useCallback((isOnline) => {\r\n    if (!socket || !isConnected) return;\r\n\r\n    const message = {\r\n      type: 'user_status',\r\n      is_online: isOnline\r\n    };\r\n\r\n    socket.send(JSON.stringify(message));\r\n  }, [socket, isConnected]);\r\n\r\n  // Connect when token is available\r\n  useEffect(() => {\r\n    if (token && user) {\r\n      connect();\r\n    } else {\r\n      disconnect();\r\n    }\r\n\r\n    return () => {\r\n      disconnect();\r\n    };\r\n  }, [token, user, connect, disconnect]);\r\n\r\n  // Update online status when connection changes\r\n  useEffect(() => {\r\n    if (isConnected && user) {\r\n      updateStatus(true);\r\n    }\r\n    \r\n    return () => {\r\n      if (user) {\r\n        updateStatus(false);\r\n      }\r\n    };\r\n  }, [isConnected, user, updateStatus]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      disconnect();\r\n    };\r\n  }, [disconnect]);\r\n\r\n  return {\r\n    socket,\r\n    isConnected,\r\n    messages,\r\n    setMessages,\r\n    conversations,\r\n    setConversations,\r\n    typingUsers,\r\n    onlineUsers,\r\n    sendMessage,\r\n    sendTyping,\r\n    markAsRead,\r\n    updateStatus,\r\n    connect,\r\n    disconnect\r\n  };\r\n};\r\n\r\nexport default useWebSocket;\r\n"],"names":[],"mappings":"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","ignoreList":[1]}