module.exports=[49975,a=>{"use strict";var b=a.i(87924),c=a.i(72131);class d extends Error{}d.prototype.name="InvalidTokenError";let e={user:null,token:null,isAuthenticated:!1,isLoading:!0,error:null},f="LOGIN_START",g="LOGIN_SUCCESS",h="LOGIN_FAILURE",i="LOGOUT",j="REGISTER_START",k="REGISTER_SUCCESS",l="REGISTER_FAILURE",m="LOAD_USER_SUCCESS",n="LOAD_USER_FAILURE",o="CLEAR_ERROR",p=(a,b)=>{switch(b.type){case f:case j:return{...a,isLoading:!0,error:null};case g:case k:return{...a,user:b.payload.user,token:b.payload.token,isAuthenticated:!0,isLoading:!1,error:null};case h:case l:case n:return{...a,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:b.payload};case i:return{...a,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null};case"LOAD_USER":return{...a,isLoading:!0};case m:return{...a,user:b.payload,isAuthenticated:!0,isLoading:!1};case o:return{...a,error:null};default:return a}},q=(0,c.createContext)();a.s(["AuthProvider",0,({children:a})=>{let[r,s]=(0,c.useReducer)(p,e),t=process.env.REACT_APP_API_URL||"http://localhost:8000/api";(0,c.useEffect)(()=>{(async()=>{let a=localStorage.getItem("token");if(!a)return s({type:n,payload:"No token found"});try{let b=function(a,b){let c;if("string"!=typeof a)throw new d("Invalid token specified: must be a string");b||(b={});let e=+(!0!==b.header),f=a.split(".")[e];if("string"!=typeof f)throw new d(`Invalid token specified: missing part #${e+1}`);try{c=function(a){let b=a.replace(/-/g,"+").replace(/_/g,"/");switch(b.length%4){case 0:break;case 2:b+="==";break;case 3:b+="=";break;default:throw Error("base64 string is not of the correct length")}try{var c;return c=b,decodeURIComponent(atob(c).replace(/(.)/g,(a,b)=>{let c=b.charCodeAt(0).toString(16).toUpperCase();return c.length<2&&(c="0"+c),"%"+c}))}catch(a){return atob(b)}}(f)}catch(a){throw new d(`Invalid token specified: invalid base64 for part #${e+1} (${a.message})`)}try{return JSON.parse(c)}catch(a){throw new d(`Invalid token specified: invalid json for part #${e+1} (${a.message})`)}}(a);if(1e3*b.exp<Date.now()){localStorage.removeItem("token"),s({type:n,payload:"Token expired"});return}let c=await fetch(`${t}/auth/me`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!c.ok)throw Error("Failed to load user");let e=await c.json();if(e.success)s({type:m,payload:e.user});else throw Error(e.error||"Failed to load user")}catch(a){localStorage.removeItem("token"),s({type:n,payload:a.message})}})()},[]);let u=async(a,b)=>{s({type:f});try{let c=await fetch(`${t}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:b})}),d=await c.json();if(d.success)return localStorage.setItem("token",d.token),s({type:g,payload:{user:d.user,token:d.token}}),{success:!0};throw Error(d.error||"Login failed")}catch(a){return s({type:h,payload:a.message}),{success:!1,error:a.message}}},v=async a=>{s({type:j});try{let b=await fetch(`${t}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(c.success)return localStorage.setItem("token",c.token),s({type:k,payload:{user:c.user,token:c.token}}),{success:!0};throw Error(c.error||"Registration failed")}catch(a){return s({type:l,payload:a.message}),{success:!1,error:a.message}}},w={...r,login:u,register:v,logout:()=>{localStorage.removeItem("token"),s({type:i})},clearError:()=>{s({type:o})}};return(0,b.jsx)(q.Provider,{value:w,children:a})},"useAuth",0,()=>{let a=(0,c.useContext)(q);if(!a)throw Error("useAuth must be used within an AuthProvider");return a}],49975)},83694,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(49975),e=a.i(50944);function f(){let[a,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(!1),{login:k,error:l}=(0,d.useAuth)(),m=(0,e.useRouter)(),n=async b=>{b.preventDefault(),j(!0),(await k(a,g)).success&&m.push("/chat"),j(!1)};return(0,b.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"bg-white p-ped rounded-lg shadow-md w-full max-w-md",children:[(0,b.jsx)("h2",{className:"text-center text-2xl font-bold mb-6",children:"Login"}),l&&(0,b.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:l}),(0,b.jsxs)("form",{onSubmit:n,children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block mb-2 font-bold",children:"Email"}),(0,b.jsx)("input",{type:"email",value:a,onChange:a=>f(a.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",placeholder:"Enter your email"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block mb-2 font-bold",children:"Password"}),(0,b.jsx)("input",{type:"password",value:g,onChange:a=>h(a.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",placeholder:"Enter your password"})]}),(0,b.jsx)("button",{type:"submit",disabled:i,className:`w-full py-2 rounded text-white ${i?"bg-gray-400":"bg-blue-500 hover:bg-blue-600"}`,children:i?"Logging in...":"Login"})]}),(0,b.jsx)("div",{className:"text-center mt-4",children:(0,b.jsxs)("p",{children:["Don't have an account? ",(0,b.jsx)("a",{href:"/register",className:"text-blue-500",children:"Register here"})]})}),(0,b.jsxs)("div",{className:"mt-6 p-4 bg-gray-100 rounded",children:[(0,b.jsx)("h4",{className:"font-bold mb-2",children:"Demo Account:"}),(0,b.jsxs)("p",{className:"text-sm",children:[(0,b.jsx)("strong",{children:"Admin:"})," admin@example.com / admin123"]})]})]})})}function g(){return(0,b.jsx)(d.AuthProvider,{children:(0,b.jsx)(f,{})})}a.s(["default",()=>g])}];

//# sourceMappingURL=_f0c20079._.js.map