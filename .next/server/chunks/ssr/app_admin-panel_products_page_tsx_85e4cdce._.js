module.exports=[6938,a=>{"use strict";var b=a.i(87924),c=a.i(15618),d=a.i(87532),e=a.i(21374),f=a.i(10448),g=a.i(81560),h=a.i(77156),i=a.i(69520),j=a.i(84505),k=a.i(83497),l=a.i(72131),m=a.i(40695),n=a.i(5522),o=a.i(87682),p=a.i(3130),q=a.i(54161),r=a.i(65733);function s(){let[a,s]=(0,l.useState)(""),[t,u]=(0,l.useState)("all"),[v,w]=(0,l.useState)([]),[x,y]=(0,l.useState)(!1),[z,A]=(0,l.useState)(""),[B,C]=(0,l.useState)(null),[D,E]=(0,l.useState)(!1),[F,G]=(0,l.useState)(!1),[H,I]=(0,l.useState)(null),[J,K]=(0,l.useState)(!1),[L,M]=(0,l.useState)({name:"",price:"",stock:0,description:"",image_url:""}),N=async()=>{try{y(!0),A("");let a=await fetch("/api/backend/admin/products"),b=await a.json().catch(()=>null);if(!a.ok)throw Error(b?.error||"Failed to load products");let c=(b?.products||[]).map(a=>{let b=Number(a.price??0),c=a.image_url||"/placeholder.svg",d=a.store_name||a.seller_name||"",e=1===Number(a.is_active)?"Active":"Inactive";return{id:Number(a.id),name:a.name||"",sku:a.sku||`SKU-${a.id}`,vendor:d,price:`$${b.toFixed(2)}`,stock:Number(a.stock??0),rating:Number(a.rating??0),status:e,category:a.category_name||"",description:a.description||"",image:c,is_active:Number(a.is_active??0),category_id:null!=a.category_id?Number(a.category_id):null}});w(c)}catch(a){A(a?.message||"Failed to load products")}finally{y(!1)}},O=async()=>{try{y(!0),A("");let a=Number(String(L.price||"").replace(/[^0-9.]/g,"")),b={name:L.name,description:L.description,price:Number.isFinite(a)?a:0,stock:Number(L.stock??0)};L.image_url&&""!==L.image_url.trim()&&(b.image_url=L.image_url.trim());let c=await fetch("/api/backend/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json().catch(()=>null);if(!c.ok)throw Error(d?.error||"Failed to create product");G(!1),M({name:"",price:"",stock:0,description:"",image_url:""}),await N()}catch(a){A(a?.message||"Failed to create product")}finally{y(!1)}};(0,l.useEffect)(()=>{N()},[]);let P=(0,l.useMemo)(()=>{let a=new Set;for(let b of v)b.category&&a.add(b.category);return Array.from(a).sort((a,b)=>a.localeCompare(b))},[v]),Q=v.filter(b=>{let c=b.name.toLowerCase().includes(a.toLowerCase())||b.sku.toLowerCase().includes(a.toLowerCase()),d="all"===t||b.category===t;return c&&d}),R=async a=>{if(confirm("Are you sure you want to delete this product?"))try{y(!0),A("");let b=await fetch(`/api/backend/admin/products/${a}`,{method:"DELETE"}),c=await b.json().catch(()=>null);if(!b.ok)throw Error(c?.error||"Failed to delete product");await N()}catch(a){A(a?.message||"Failed to delete product")}finally{y(!1)}},S=async a=>{let b=v.find(b=>b.id===a);if(!b)return;let c="Active"!==b.status;try{y(!0),A("");let b=await fetch(`/api/backend/admin/products/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:+!!c})}),d=await b.json().catch(()=>null);if(!b.ok)throw Error(d?.error||"Failed to update status");await N()}catch(a){A(a?.message||"Failed to update status")}finally{y(!1)}},T=async()=>{if(H)try{y(!0),A("");let a=Number(String(H.price||"").replace(/[^0-9.]/g,"")),b={name:H.name,description:H.description,price:Number.isFinite(a)?a:0,stock:Number(H.stock??0)};H.image&&"/placeholder.svg"!==H.image&&(b.image_url=H.image);let c=await fetch(`/api/backend/admin/products/${H.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json().catch(()=>null);if(!c.ok)throw Error(d?.error||"Failed to update product");K(!1),I(null),await N()}catch(a){A(a?.message||"Failed to update product")}finally{y(!1)}},U=a=>"Active"===a?"bg-green-100 text-green-800":"bg-red-100 text-red-800",V=a=>a>100?"text-green-600":a>10?"text-orange-600":"text-red-600";return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Products Management"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage vendor and in-house products"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(m.Button,{variant:"outline",onClick:()=>{N()},children:[(0,b.jsx)(i.RefreshCw,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,b.jsxs)(m.Button,{variant:"outline",onClick:()=>{let a=encodeURI("data:text/csv;charset=utf-8,Product Name,SKU,Vendor,Price,Stock,Rating,Status,Category\n"+v.map(a=>`${a.name},${a.sku},${a.vendor},${a.price},${a.stock},${a.rating},${a.status},${a.category}`).join("\n")),b=document.createElement("a");b.setAttribute("href",a),b.setAttribute("download","products.csv"),document.body.appendChild(b),b.click(),document.body.removeChild(b)},children:[(0,b.jsx)(j.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(m.Button,{onClick:()=>G(!0),children:[(0,b.jsx)(c.Plus,{size:18,className:"mr-2"}),"Add Product"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Search,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(n.Input,{type:"text",placeholder:"Search by product name or SKU...",value:a,onChange:a=>s(a.target.value),className:"pl-10"})]})}),(0,b.jsxs)(o.Select,{value:t,onValueChange:u,children:[(0,b.jsx)(o.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(o.SelectValue,{placeholder:"All Categories"})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"all",children:"All Categories"}),P.map(a=>(0,b.jsx)(o.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>{s(""),u("all")},children:"Clear Filters"})]}),z&&(0,b.jsx)("div",{className:"text-red-600",children:z}),(0,b.jsx)(p.Card,{children:(0,b.jsx)(p.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Product"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"SKU"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Vendor"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Price"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Stock"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Rating"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:Q.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-muted rounded-md flex items-center justify-center",children:(0,b.jsx)(k.Package,{size:20,className:"text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.category})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-muted-foreground",children:a.sku}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.vendor}),(0,b.jsx)("td",{className:"px-4 py-3 text-primary font-semibold",children:a.price}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:V(a.stock),children:a.stock})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(e.Star,{size:14,className:"fill-yellow-400 text-yellow-400"}),(0,b.jsx)("span",{children:a.rating})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(q.Badge,{className:U(a.status),children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",onClick:()=>{C(a),E(!0)},children:(0,b.jsx)(h.Eye,{size:16,className:"text-primary"})}),(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",onClick:()=>{I({...a}),K(!0)},children:(0,b.jsx)(f.Edit2,{size:16,className:"text-blue-500"})}),(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",onClick:()=>S(a.id),children:(0,b.jsx)("div",{className:`w-4 h-4 rounded-full ${"Active"===a.status?"bg-red-500":"bg-green-500"}`})}),(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",onClick:()=>R(a.id),children:(0,b.jsx)(g.Trash2,{size:16,className:"text-red-500"})})]})})]},a.id))})]}),!x&&0===Q.length&&(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No products found matching your criteria"})]})})}),(0,b.jsx)(r.Dialog,{open:D,onOpenChange:E,children:(0,b.jsxs)(r.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{children:"Product Details"}),(0,b.jsx)(r.DialogDescription,{children:"View complete product information"})]}),B&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Product Name"}),(0,b.jsx)("p",{className:"font-semibold",children:B.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"SKU"}),(0,b.jsx)("p",{children:B.sku})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Vendor"}),(0,b.jsx)("p",{children:B.vendor})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),(0,b.jsx)("p",{children:B.category})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),(0,b.jsx)("p",{className:"font-semibold text-lg text-primary",children:B.price})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Stock"}),(0,b.jsxs)("p",{className:V(B.stock),children:[B.stock," units"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Rating"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(e.Star,{size:14,className:"fill-yellow-400 text-yellow-400"}),(0,b.jsx)("span",{children:B.rating})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),(0,b.jsx)(q.Badge,{className:U(B.status),children:B.status})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),(0,b.jsx)("p",{children:B.description})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(m.Button,{onClick:()=>E(!1),children:"Close"})})]})]})}),(0,b.jsx)(r.Dialog,{open:J,onOpenChange:K,children:(0,b.jsxs)(r.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{children:"Edit Product"}),(0,b.jsx)(r.DialogDescription,{children:"Update product information"})]}),H&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Product Name"}),(0,b.jsx)(n.Input,{value:H.name,onChange:a=>I({...H,name:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"SKU"}),(0,b.jsx)(n.Input,{value:H.sku,onChange:a=>I({...H,sku:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Vendor"}),(0,b.jsx)(n.Input,{value:H.vendor,onChange:a=>I({...H,vendor:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),(0,b.jsx)(n.Input,{value:H.price,onChange:a=>I({...H,price:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Stock"}),(0,b.jsx)(n.Input,{type:"number",value:H.stock,onChange:a=>I({...H,stock:parseInt(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Rating"}),(0,b.jsx)(n.Input,{type:"number",step:"0.1",min:"0",max:"5",value:H.rating,onChange:a=>I({...H,rating:parseFloat(a.target.value)})})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),(0,b.jsx)(n.Input,{value:H.description,onChange:a=>I({...H,description:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),(0,b.jsx)(m.Button,{onClick:T,children:"Save Changes"})]})]})]})}),(0,b.jsx)(r.Dialog,{open:F,onOpenChange:G,children:(0,b.jsxs)(r.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{children:"Add Product"}),(0,b.jsx)(r.DialogDescription,{children:"Create a new product"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Product Name"}),(0,b.jsx)(n.Input,{value:L.name,onChange:a=>M({...L,name:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),(0,b.jsx)(n.Input,{value:L.price,onChange:a=>M({...L,price:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Stock"}),(0,b.jsx)(n.Input,{type:"number",value:L.stock,onChange:a=>M({...L,stock:Number(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Image URL"}),(0,b.jsx)(n.Input,{value:L.image_url,onChange:a=>M({...L,image_url:a.target.value})})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),(0,b.jsx)(n.Input,{value:L.description,onChange:a=>M({...L,description:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,b.jsx)(m.Button,{onClick:O,disabled:x,children:x?"Saving...":"Create"})]})]})]})})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=app_admin-panel_products_page_tsx_85e4cdce._.js.map