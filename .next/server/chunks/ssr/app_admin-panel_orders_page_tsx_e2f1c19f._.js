module.exports=[12414,a=>{"use strict";var b=a.i(87924),c=a.i(87532),d=a.i(77156),e=a.i(10448),f=a.i(81560),g=a.i(69520),h=a.i(84505),i=a.i(72131),j=a.i(40695),k=a.i(5522),l=a.i(87682),m=a.i(3130),n=a.i(54161),o=a.i(65733);function p(){let[a,p]=(0,i.useState)(""),[q,r]=(0,i.useState)("all"),[s,t]=(0,i.useState)([]),[u,v]=(0,i.useState)(!1),[w,x]=(0,i.useState)(""),[y,z]=(0,i.useState)(null),[A,B]=(0,i.useState)(null),[C,D]=(0,i.useState)(!1),[E,F]=(0,i.useState)(!1),G=async()=>{try{v(!0),x("");let b=new URLSearchParams;"all"!==q&&b.set("status",q.toLowerCase()),a.trim()&&b.set("search",a.trim());let c=b.size?`/api/backend/admin/orders?${b.toString()}`:"/api/backend/admin/orders",d=await fetch(c),e=await d.json().catch(()=>null);if(!d.ok)throw Error(e?.error||"Failed to load orders");let f=(e?.orders||[]).map(a=>{let b;return{orderId:Number(a.id),id:`#ORD-${String(a.id).padStart(3,"0")}`,customer:a.customer_name||"",vendor:a.store_name||a.seller_name||"",amount:`$${Number(a.total_amount??0).toFixed(2)}`,status:(b=(a.status||"").toLowerCase(),"pending"===b?"Pending":"processing"===b?"Processing":"shipped"===b?"Shipped":"delivered"===b?"Delivered":"Cancelled"),items:Number(a.item_count??0),date:a.created_at?new Date(a.created_at).toLocaleDateString():"",email:a.customer_email||"",phone:a.customer_phone||"",address:a.shipping_address||""}});t(f)}catch(a){x(a?.message||"Failed to load orders")}finally{v(!1)}};(0,i.useEffect)(()=>{G()},[q]),(0,i.useEffect)(()=>{let a=setTimeout(()=>{G()},350);return()=>clearTimeout(a)},[a]);let H=async a=>{confirm("Cancel this order?")&&await I(a,"Cancelled")},I=async(a,b)=>{try{v(!0),x("");let c=await fetch(`/api/backend/admin/orders/${a}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b.toLowerCase()})}),d=await c.json().catch(()=>null);if(!c.ok)throw Error(d?.error||"Failed to update status");await G()}catch(a){x(a?.message||"Failed to update status")}finally{v(!1)}},J=a=>{switch(a.toLowerCase()){case"delivered":return"bg-green-100 text-green-800";case"processing":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"shipped":return"bg-purple-100 text-purple-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Orders Management"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage and track all orders"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(j.Button,{variant:"outline",onClick:()=>{G()},children:[(0,b.jsx)(g.RefreshCw,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,b.jsxs)(j.Button,{variant:"outline",onClick:()=>{let a=encodeURI("data:text/csv;charset=utf-8,Order ID,Customer,Vendor,Amount,Status,Items,Date\n"+s.map(a=>`${a.id},${a.customer},${a.vendor},${a.amount},${a.status},${a.items},${a.date}`).join("\n")),b=document.createElement("a");b.setAttribute("href",a),b.setAttribute("download","orders.csv"),document.body.appendChild(b),b.click(),document.body.removeChild(b)},children:[(0,b.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),w&&(0,b.jsx)("div",{className:"text-red-600",children:w}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Search Orders"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(c.Search,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(k.Input,{type:"text",placeholder:"Search by order ID or customer...",value:a,onChange:a=>p(a.target.value),className:"pl-10"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Filter by Status"}),(0,b.jsxs)(l.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(l.SelectValue,{placeholder:"Filter by Status"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(l.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(l.SelectItem,{value:"processing",children:"Processing"}),(0,b.jsx)(l.SelectItem,{value:"shipped",children:"Shipped"}),(0,b.jsx)(l.SelectItem,{value:"delivered",children:"Delivered"}),(0,b.jsx)(l.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,b.jsx)(j.Button,{onClick:()=>{p(""),r("all")},children:"Clear Filters"})]}),(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Order ID"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Customer"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Vendor"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Amount"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Items"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:s.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50",children:[(0,b.jsx)("td",{className:"px-4 py-3 font-semibold text-primary",children:a.id}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.customer}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.vendor}),(0,b.jsx)("td",{className:"px-4 py-3 font-semibold",children:a.amount}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.items}),(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsxs)(l.Select,{value:a.status,onValueChange:b=>I(a.orderId,b),children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"Pending",children:"Pending"}),(0,b.jsx)(l.SelectItem,{value:"Processing",children:"Processing"}),(0,b.jsx)(l.SelectItem,{value:"Shipped",children:"Shipped"}),(0,b.jsx)(l.SelectItem,{value:"Delivered",children:"Delivered"}),(0,b.jsx)(l.SelectItem,{value:"Cancelled",children:"Cancelled"})]})]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(n.Badge,{className:J(a.status),children:a.status})})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:a.date}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>{z(a),D(!0)},children:(0,b.jsx)(d.Eye,{size:16,className:"text-primary"})}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>{B({...a}),F(!0)},children:(0,b.jsx)(e.Edit2,{size:16,className:"text-blue-500"})}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>H(a.orderId),children:(0,b.jsx)(f.Trash2,{size:16,className:"text-red-500"})})]})})]},a.id))})]}),!u&&0===s.length&&(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No orders found"})]})})}),(0,b.jsx)(o.Dialog,{open:C,onOpenChange:D,children:(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Order Details"}),(0,b.jsx)(o.DialogDescription,{children:"View complete order information"})]}),y&&(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Order ID"}),(0,b.jsx)("p",{className:"font-semibold",children:y.id})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),(0,b.jsx)(n.Badge,{className:J(y.status),children:y.status})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),(0,b.jsx)("p",{className:"font-semibold",children:y.customer})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Vendor"}),(0,b.jsx)("p",{className:"font-semibold",children:y.vendor})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),(0,b.jsx)("p",{className:"font-semibold text-lg",children:y.amount})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Items"}),(0,b.jsxs)("p",{children:[y.items," items"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),(0,b.jsx)("p",{children:y.date})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{children:y.email})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),(0,b.jsx)("p",{children:y.phone})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),(0,b.jsx)("p",{children:y.address})]})]})})]})}),(0,b.jsx)(o.Dialog,{open:E,onOpenChange:F,children:(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Edit Order"}),(0,b.jsx)(o.DialogDescription,{children:"Update order information"})]}),A&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),(0,b.jsx)(k.Input,{value:A.customer,onChange:a=>B({...A,customer:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Vendor"}),(0,b.jsx)(k.Input,{value:A.vendor,onChange:a=>B({...A,vendor:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),(0,b.jsx)(k.Input,{value:A.amount,onChange:a=>B({...A,amount:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Items"}),(0,b.jsx)(k.Input,{type:"number",value:A.items,onChange:a=>B({...A,items:parseInt(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,b.jsx)(k.Input,{value:A.email,onChange:a=>B({...A,email:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),(0,b.jsx)(k.Input,{value:A.phone,onChange:a=>B({...A,phone:a.target.value})})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),(0,b.jsx)(k.Input,{value:A.address,onChange:a=>B({...A,address:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,b.jsx)(j.Button,{onClick:()=>{F(!1),B(null)},children:"Save Changes"})]})]})]})})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=app_admin-panel_orders_page_tsx_e2f1c19f._.js.map