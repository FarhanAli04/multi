module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},92258,a=>{"use strict";let b=(0,a.i(70106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],92258)},46893,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},56738,a=>{"use strict";let b=(0,a.i(70106).default)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);a.s(["Wallet",()=>b],56738)},30617,63588,20005,23312,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);a.s(["LayoutDashboard",()=>c],30617);let d=(0,b.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);a.s(["MessageSquare",()=>d],63588);let e=(0,b.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>e],20005);let f=(0,b.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>f],23312)},38784,a=>{"use strict";let b=(0,a.i(70106).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>b],38784)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},72692,a=>{"use strict";let b=(0,a.i(70106).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);a.s(["Menu",()=>b],72692)},39761,a=>{"use strict";let b=(0,a.i(70106).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>b],39761)},29147,14084,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(30617),f=a.i(83497),g=a.i(38784),h=a.i(63588),i=a.i(56738),j=a.i(39761),k=a.i(21161),l=a.i(20005),m=a.i(33508);function n({isMobileMenuOpen:a,onMobileMenuClose:n}){let o=(0,d.usePathname)(),p=[{href:"/seller",icon:e.LayoutDashboard,label:"Dashboard"},{href:"/seller/products",icon:f.Package,label:"Products"},{href:"/seller/orders",icon:g.ShoppingCart,label:"Orders"},{href:"/seller/messages",icon:h.MessageSquare,label:"Messages"},{href:"/seller/wallet",icon:i.Wallet,label:"Wallet"},{href:"/seller/analytics",icon:j.BarChart3,label:"Analytics"},{href:"/seller/settings",icon:k.Settings,label:"Settings"}];return(0,b.jsxs)(b.Fragment,{children:[a&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:n}),(0,b.jsxs)("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 
        w-64 bg-card border-r border-border min-h-screen flex flex-col
        transform transition-transform duration-300 ease-in-out
        ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[(0,b.jsxs)("div",{className:"lg:hidden flex items-center justify-between p-4 border-b border-border",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-primary",children:"Seller Dashboard"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Your Business"})]}),(0,b.jsx)("button",{onClick:n,className:"flex items-center justify-center w-10 h-10 rounded-lg hover:bg-muted transition-colors",children:(0,b.jsx)(m.X,{size:20})})]}),(0,b.jsxs)("div",{className:"hidden lg:block p-6 border-b border-border",children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-primary",children:"Seller Dashboard"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Your Business"})]}),(0,b.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:p.map(a=>{let d=a.icon,e=o===a.href;return(0,b.jsxs)(c.default,{href:a.href,onClick:n,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e?"bg-primary text-primary-foreground":"text-foreground hover:bg-muted"}`,children:[(0,b.jsx)(d,{size:20}),(0,b.jsx)("span",{className:"font-medium",children:a.label})]},a.href)})}),(0,b.jsx)("div",{className:"p-4 border-t border-border",children:(0,b.jsxs)("button",{className:"flex items-center gap-3 w-full px-4 py-3 text-danger hover:bg-muted rounded-lg transition-colors",children:[(0,b.jsx)(l.LogOut,{size:20}),(0,b.jsx)("span",{className:"font-medium",children:"Logout"})]})})]})]})}a.s(["SellerSidebar",()=>n],29147);var o=a.i(23312),p=a.i(46842),q=a.i(72692);function r({onMobileMenuToggle:a,isMobileMenuOpen:c}){return(0,b.jsxs)("header",{className:"bg-card border-b border-border h-16 flex items-center justify-between px-4 md:px-6 sticky top-0 z-40",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:a,className:"lg:hidden flex items-center justify-center w-10 h-10 rounded-lg hover:bg-muted transition-colors",children:c?(0,b.jsx)(m.X,{size:20}):(0,b.jsx)(q.Menu,{size:20})}),(0,b.jsx)("div",{children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground truncate",children:"Welcome to Your Store"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 md:gap-6",children:[(0,b.jsxs)("button",{className:"relative text-muted-foreground hover:text-foreground transition-colors",children:[(0,b.jsx)(o.Bell,{size:20}),(0,b.jsx)("span",{className:"absolute top-0 right-0 w-2 h-2 bg-warning rounded-full"})]}),(0,b.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-muted transition-colors",children:[(0,b.jsx)(p.User,{size:20,className:"text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm font-medium hidden sm:inline",children:"Seller"})]})]})]})}a.s(["SellerHeader",()=>r],14084)},42900,a=>{"use strict";let b=(0,a.i(70106).default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);a.s(["Archive",()=>b],42900)},11505,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(29147),e=a.i(14084),f=a.i(87532),g=a.i(92759),h=a.i(83952),i=a.i(92258);let j=(0,a.i(70106).default)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);var k=a.i(81560),l=a.i(42900),m=a.i(40695),n=a.i(5522),o=a.i(3130),p=a.i(54161),q=a.i(46893),r=a.i(7706);function s(){let[a,s]=(0,c.useState)(null),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(!1),L=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=!1;return(async()=>{try{A(!0),E("");let[b,c]=await Promise.all([fetch("/api/backend/auth/me"),fetch("/api/backend/conversations")]),d=await b.json().catch(()=>null),e=await c.json().catch(()=>null);if(!b.ok)throw Error(d?.error||"Failed to load user");if(!c.ok)throw Error(e?.error||"Failed to load conversations");if(a)return;s(d?.user||null),u(Array.isArray(e?.conversations)?e.conversations:[])}catch(b){if(a)return;E(b?.message||"Failed to load messages")}finally{if(a)return;A(!1)}})(),()=>{a=!0}},[]);let M=(0,c.useMemo)(()=>{let a=F.trim().toLowerCase();return a?t.filter(b=>(b.other_user_name||"").toLowerCase().includes(a)||(b.other_user_email||"").toLowerCase().includes(a)||(b.last_message||"").toLowerCase().includes(a)):t},[t,F]),N=async a=>{w(a),K(!1),I(""),C(!0),E("");try{let b=await fetch(`/api/backend/conversations/${a.conversation_id}/messages`),c=await b.json().catch(()=>null);if(!b.ok)throw Error(c?.error||"Failed to load conversation messages");let d=Array.isArray(c?.messages)?c.messages:[];y(d),u(b=>b.map(b=>b.conversation_id===a.conversation_id?{...b,unread_count:0}:b)),setTimeout(()=>{L.current?.scrollIntoView({behavior:"smooth"})},0)}catch(a){E(a?.message||"Failed to load messages")}finally{C(!1)}},O=async()=>{if(v&&H.trim())try{let a=await fetch("/api/backend/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_id:v.conversation_id,content:H.trim()})}),b=await a.json().catch(()=>null);if(!a.ok)throw Error(b?.error||"Failed to send message");let c=b?.message;c&&(y(a=>[...a,c]),u(a=>a.map(a=>a.conversation_id===v.conversation_id?{...a,last_message:c.content,last_message_at:c.created_at}:a)),setTimeout(()=>{L.current?.scrollIntoView({behavior:"smooth"})},0)),I(""),K(!1)}catch(a){E(a?.message||"Failed to send message")}},P=a=>{if(!a)return"";let b=new Date(a);return Number.isNaN(b.getTime())?"":b.toLocaleString()};return(0,b.jsxs)("div",{className:"flex bg-background",children:[(0,b.jsx)(d.SellerSidebar,{}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)(e.SellerHeader,{}),(0,b.jsxs)("main",{className:"flex-1 p-8",children:[(0,b.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Messages"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Communicate with your customers"})]}),(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:18}),(0,b.jsx)(n.Input,{placeholder:"Search messages...",value:F,onChange:a=>G(a.target.value),className:"pl-10 w-64"})]}),(0,b.jsxs)(m.Button,{variant:"outline",children:[(0,b.jsx)(l.Archive,{className:"mr-2 h-4 w-4"}),"Archive All"]})]})]}),D?(0,b.jsx)(o.Card,{className:"mb-6",children:(0,b.jsx)(o.CardContent,{className:"p-4",children:(0,b.jsx)("p",{className:"text-sm text-destructive",children:D})})}):null,(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsx)(o.CardTitle,{className:"text-lg",children:"Inbox"})}),(0,b.jsx)(o.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"divide-y divide-border",children:z?(0,b.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading conversations..."}):0===M.length?(0,b.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:"No conversations yet."}):M.map(a=>(0,b.jsxs)("div",{className:`p-4 cursor-pointer hover:bg-muted transition-colors ${v?.conversation_id===a.conversation_id?"bg-muted":""} ${Number(a.unread_count||0)>0?"border-l-4 border-primary":""}`,onClick:()=>N(a),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(r.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(r.AvatarImage,{src:a.other_user_avatar}),(0,b.jsx)(r.AvatarFallback,{children:(a.other_user_name||"?").charAt(0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.other_user_name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:P(a.last_message_at||a.updated_at)})]})]}),(0,b.jsx)("div",{className:"flex gap-2 items-center",children:Number(a.unread_count||0)>0?(0,b.jsxs)(p.Badge,{variant:"secondary",className:"text-xs",children:[a.unread_count," new"]}):null})]}),(0,b.jsx)("p",{className:"text-sm font-medium mb-1 line-clamp-1",children:"Conversation"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:a.last_message||"No messages yet"})]},a.conversation_id))})})]})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:v?(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(r.Avatar,{className:"h-10 w-10",children:[(0,b.jsx)(r.AvatarImage,{src:v.other_user_avatar}),(0,b.jsx)(r.AvatarFallback,{children:(v.other_user_name||"?").charAt(0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.CardTitle,{className:"text-lg",children:v.other_user_name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:v.other_user_email})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(j,{className:"h-4 w-4"})}),(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",onClick:()=>{var a;return a=v.conversation_id,void(u(b=>b.filter(b=>b.conversation_id!==a)),v?.conversation_id===a&&(w(null),y([])))},children:(0,b.jsx)(k.Trash2,{className:"h-4 w-4"})})]})]})}),(0,b.jsx)(o.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"border rounded-lg p-4 bg-muted/30 max-h-[360px] overflow-y-auto",children:B?(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading messages..."}):0===x.length?(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No messages yet."}):(0,b.jsxs)("div",{className:"space-y-2",children:[x.map(c=>{let d=a?.id!=null&&Number(c.sender_id)===Number(a.id);return(0,b.jsx)("div",{className:`flex ${d?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[80%] rounded-lg px-3 py-2 text-sm ${d?"bg-primary text-primary-foreground":"bg-background border"}`,children:[(0,b.jsx)("div",{children:c.content}),(0,b.jsx)("div",{className:`mt-1 text-[11px] ${d?"opacity-80":"text-muted-foreground"}`,children:P(c.created_at)})]})},c.id)}),(0,b.jsx)("div",{ref:L})]})}),(0,b.jsx)("div",{className:"border-t pt-4",children:J?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(q.Textarea,{placeholder:"Type your reply...",value:H,onChange:a=>I(a.target.value),className:"min-h-[100px]"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(m.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(h.Paperclip,{className:"mr-2 h-4 w-4"}),"Attach File"]}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),(0,b.jsxs)(m.Button,{onClick:O,children:[(0,b.jsx)(g.Send,{className:"mr-2 h-4 w-4"}),"Send Reply"]})]})]}):(0,b.jsxs)(m.Button,{onClick:()=>K(!0),className:"w-full",children:[(0,b.jsx)(j,{className:"mr-2 h-4 w-4"}),"Reply to Message"]})})]})})]}):(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"flex items-center justify-center h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(i.Mail,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Select a message to view details"})]})})})})]})]})]})]})}a.s(["default",()=>s],11505)}];

//# sourceMappingURL=_662a00b5._.js.map